<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 16: Revision and Proofreading - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="site-title">
                    <img src="../shared/img/maple-logo.svg" alt="Canadian Maple Leaf" class="logo">
                    <span>The Canadian Style</span>
                </div>
                <nav class="main-nav">
                    <a href="../index.html" class="nav-link">Dashboard</a>
                    <a href="../index.html#chapters" class="nav-link">All Chapters</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="chapter-header">
                <div class="chapter-info">
                    <span class="chapter-number">Chapter 16</span>
                    <h1 class="chapter-title">Revision and Proofreading</h1>
                    <p class="chapter-description">Master the techniques for effective revision and proofreading</p>
                </div>
                <div class="progress-indicator">
                    <div class="progress-ring">
                        <svg class="progress-svg" width="60" height="60">
                            <circle cx="30" cy="30" r="25" fill="none" stroke="#e0e0e0" stroke-width="4"/>
                            <circle cx="30" cy="30" r="25" fill="none" stroke="#007acc" stroke-width="4" 
                                    stroke-dasharray="157" stroke-dashoffset="157" class="progress-circle"/>
                        </svg>
                        <span class="progress-text">0%</span>
                    </div>
                </div>
            </div>

            <nav class="section-tabs">
                <button class="tab-link active" data-section="revision-principles">
                    16.01 Revision Principles
                </button>
                <button class="tab-link" data-section="content-revision">
                    16.02 Content Revision
                </button>
                <button class="tab-link" data-section="proofreading-techniques">
                    16.03 Proofreading Techniques
                </button>
                <button class="tab-link" data-section="common-errors">
                    16.04 Common Errors
                </button>
                <button class="tab-link" data-section="formatting-consistency">
                    16.05 Formatting & Consistency
                </button>
                <button class="tab-link" data-section="final-checks">
                    16.06 Final Checks
                </button>
            </nav>

            <section id="revision-principles" class="content-section">
                <div class="section-content">
                    <h2>16.01 Revision Principles</h2>
                    
                    <div class="info-box">
                        <h3>üîÑ Understanding the Revision Process</h3>
                        <p>Revision and proofreading are distinct but complementary processes in creating effective written communication.</p>
                    </div>

                    <h3>Key Differences</h3>
                    <div class="comparison-table">
                        <div class="comparison-row">
                            <div class="comparison-header">Revision</div>
                            <div class="comparison-header">Proofreading</div>
                        </div>
                        <div class="comparison-row">
                            <div>Content and structure</div>
                            <div>Surface errors and formatting</div>
                        </div>
                        <div class="comparison-row">
                            <div>Major changes possible</div>
                            <div>Minor corrections only</div>
                        </div>
                        <div class="comparison-row">
                            <div>Multiple drafts</div>
                            <div>Final polish</div>
                        </div>
                    </div>

                    <h3>The Revision Hierarchy</h3>
                    <ol>
                        <li><strong>Content revision:</strong> Purpose, audience, argument</li>
                        <li><strong>Structural editing:</strong> Organization, flow, transitions</li>
                        <li><strong>Copy editing:</strong> Clarity, style, word choice</li>
                        <li><strong>Proofreading:</strong> Grammar, spelling, punctuation</li>
                    </ol>

                    <div class="tip-box">
                        <h4>üí° Pro Tip</h4>
                        <p>Take time between writing and revising. Fresh eyes see problems that tired eyes miss.</p>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-revision-principles"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('revision-principles')">
                        Mark as Complete
                    </button>
                </div>
            </section>

            <section id="content-revision" class="content-section" style="display: none;">
                <div class="section-content">
                    <h2>16.02 Content Revision</h2>
                    
                    <div class="info-box">
                        <h3>üéØ Focus on the Big Picture First</h3>
                        <p>Content revision addresses fundamental questions about purpose, audience, and effectiveness.</p>
                    </div>

                    <h3>Essential Questions for Content Revision</h3>
                    <div class="checklist">
                        <div class="checklist-item">
                            <span class="checklist-icon">‚úì</span>
                            <span>Does this document achieve its intended purpose?</span>
                        </div>
                        <div class="checklist-item">
                            <span class="checklist-icon">‚úì</span>
                            <span>Is the content appropriate for the target audience?</span>
                        </div>
                        <div class="checklist-item">
                            <span class="checklist-icon">‚úì</span>
                            <span>Is the main argument or message clear?</span>
                        </div>
                        <div class="checklist-item">
                            <span class="checklist-icon">‚úì</span>
                            <span>Is all information necessary and relevant?</span>
                        </div>
                        <div class="checklist-item">
                            <span class="checklist-icon">‚úì</span>
                            <span>Are there gaps in logic or missing information?</span>
                        </div>
                    </div>

                    <h3>Revision Strategies</h3>
                    <div class="strategy-grid">
                        <div class="strategy-card">
                            <h4>Read as Your Audience</h4>
                            <p>Approach your writing from your reader's perspective. What questions would they have?</p>
                        </div>
                        <div class="strategy-card">
                            <h4>Outline Backwards</h4>
                            <p>Create an outline from your finished draft to check logical flow and organization.</p>
                        </div>
                        <div class="strategy-card">
                            <h4>Question Everything</h4>
                            <p>Challenge each paragraph: Why is this here? What does it contribute?</p>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Avoid This Mistake</h4>
                        <p>Don't focus on fixing typos during content revision. Save surface corrections for proofreading.</p>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-content-revision"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('content-revision')">
                        Mark as Complete
                    </button>
                </div>
            </section>

            <section id="proofreading-techniques" class="content-section" style="display: none;">
                <div class="section-content">
                    <h2>16.03 Proofreading Techniques</h2>
                    
                    <div class="info-box">
                        <h3>üîç Systematic Error Detection</h3>
                        <p>Effective proofreading requires focused attention and systematic techniques.</p>
                    </div>

                    <h3>Proven Proofreading Methods</h3>
                    <div class="technique-list">
                        <div class="technique-item">
                            <h4>1. Multiple Focused Passes</h4>
                            <p>Read through once for each type of error:</p>
                            <ul>
                                <li>Pass 1: Spelling errors</li>
                                <li>Pass 2: Punctuation</li>
                                <li>Pass 3: Grammar and usage</li>
                                <li>Pass 4: Formatting consistency</li>
                            </ul>
                        </div>
                        
                        <div class="technique-item">
                            <h4>2. Read Backwards</h4>
                            <p>Start from the last sentence and work backwards. This breaks the flow and forces attention on individual words.</p>
                        </div>
                        
                        <div class="technique-item">
                            <h4>3. Read Aloud</h4>
                            <p>Hearing your writing reveals awkward phrasing, missing words, and rhythm problems.</p>
                        </div>
                        
                        <div class="technique-item">
                            <h4>4. Change the Format</h4>
                            <p>Print your document or change the font/size to see it with fresh eyes.</p>
                        </div>
                    </div>

                    <h3>Technology Aids</h3>
                    <div class="tech-tips">
                        <div class="tech-tip">
                            <strong>Spell Check:</strong> Use it, but don't rely on it completely. It won't catch homophones or context errors.
                        </div>
                        <div class="tech-tip">
                            <strong>Grammar Check:</strong> Helpful for basic errors, but may flag correct advanced constructions.
                        </div>
                        <div class="tech-tip">
                            <strong>Search Function:</strong> Use "Find" to check consistency of terms, names, and formatting.
                        </div>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-proofreading-techniques"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('proofreading-techniques')">
                        Mark as Complete
                    </button>
                </div>
            </section>

            <section id="common-errors" class="content-section" style="display: none;">
                <div class="section-content">
                    <h2>16.04 Common Errors</h2>
                    
                    <div class="info-box">
                        <h3>üéØ Know What to Look For</h3>
                        <p>Familiarizing yourself with common error patterns makes proofreading more efficient.</p>
                    </div>

                    <h3>Frequent Error Categories</h3>
                    
                    <div class="error-category">
                        <h4>1. Homophone Confusion</h4>
                        <div class="error-examples">
                            <div class="error-pair">
                                <span class="incorrect">‚ùå Your welcome</span>
                                <span class="correct">‚úÖ You're welcome</span>
                            </div>
                            <div class="error-pair">
                                <span class="incorrect">‚ùå Its been a long day</span>
                                <span class="correct">‚úÖ It's been a long day</span>
                            </div>
                            <div class="error-pair">
                                <span class="incorrect">‚ùå There going to the meeting</span>
                                <span class="correct">‚úÖ They're going to the meeting</span>
                            </div>
                        </div>
                    </div>

                    <div class="error-category">
                        <h4>2. Subject-Verb Agreement</h4>
                        <div class="error-examples">
                            <div class="error-pair">
                                <span class="incorrect">‚ùå The team of experts are reviewing</span>
                                <span class="correct">‚úÖ The team of experts is reviewing</span>
                            </div>
                            <div class="error-pair">
                                <span class="incorrect">‚ùå Neither John nor his colleagues was present</span>
                                <span class="correct">‚úÖ Neither John nor his colleagues were present</span>
                            </div>
                        </div>
                    </div>

                    <div class="error-category">
                        <h4>3. Apostrophe Errors</h4>
                        <div class="error-examples">
                            <div class="error-pair">
                                <span class="incorrect">‚ùå The companys policy</span>
                                <span class="correct">‚úÖ The company's policy</span>
                            </div>
                            <div class="error-pair">
                                <span class="incorrect">‚ùå Several CEO's attended</span>
                                <span class="correct">‚úÖ Several CEOs attended</span>
                            </div>
                        </div>
                    </div>

                    <div class="error-category">
                        <h4>4. Comma Splices</h4>
                        <div class="error-examples">
                            <div class="error-pair">
                                <span class="incorrect">‚ùå The meeting was long, everyone was tired</span>
                                <span class="correct">‚úÖ The meeting was long, and everyone was tired</span>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>üí° Create Your Personal Error List</h4>
                        <p>Keep track of errors you commonly make and check for them specifically during proofreading.</p>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-common-errors"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('common-errors')">
                        Mark as Complete
                    </button>
                </div>
            </section>

            <section id="formatting-consistency" class="content-section" style="display: none;">
                <div class="section-content">
                    <h2>16.05 Formatting and Consistency</h2>
                    
                    <div class="info-box">
                        <h3>üìê Professional Presentation Matters</h3>
                        <p>Consistent formatting enhances readability and demonstrates attention to detail.</p>
                    </div>

                    <h3>Formatting Elements to Check</h3>
                    
                    <div class="formatting-checklist">
                        <div class="format-category">
                            <h4>Visual Consistency</h4>
                            <ul>
                                <li>Heading styles and hierarchy</li>
                                <li>Font consistency</li>
                                <li>Spacing between elements</li>
                                <li>Margin alignment</li>
                                <li>Bullet point styles</li>
                            </ul>
                        </div>
                        
                        <div class="format-category">
                            <h4>Content Formatting</h4>
                            <ul>
                                <li>Date formats (March 15, 2024 vs. 15/03/24)</li>
                                <li>Number styles (15 vs. fifteen)</li>
                                <li>Abbreviation consistency</li>
                                <li>Citation formats</li>
                                <li>Capitalization patterns</li>
                            </ul>
                        </div>
                        
                        <div class="format-category">
                            <h4>Document Elements</h4>
                            <ul>
                                <li>Header and footer consistency</li>
                                <li>Page numbering</li>
                                <li>Table formatting</li>
                                <li>Figure captions</li>
                                <li>Reference list formatting</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Quick Consistency Checks</h3>
                    <div class="quick-checks">
                        <div class="check-item">
                            <strong>Use Find & Replace:</strong> Search for specific terms to ensure consistent spelling and formatting.
                        </div>
                        <div class="check-item">
                            <strong>Style Sheets:</strong> Use document styles to maintain consistent formatting automatically.
                        </div>
                        <div class="check-item">
                            <strong>Print Preview:</strong> Review the document as it will appear to readers.
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Common Consistency Errors</h4>
                        <ul>
                            <li>Mixing title abbreviations (Dr. Smith, Ms Johnson, Mr. Brown)</li>
                            <li>Inconsistent date formats within one document</li>
                            <li>Varying heading capitalization styles</li>
                            <li>Mixed number formats (3 people, fifteen computers)</li>
                        </ul>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-formatting-consistency"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('formatting-consistency')">
                        Mark as Complete
                    </button>
                </div>
            </section>

            <section id="final-checks" class="content-section" style="display: none;">
                <div class="section-content">
                    <h2>16.06 Final Checks</h2>
                    
                    <div class="info-box">
                        <h3>‚úÖ The Last Line of Defense</h3>
                        <p>Final checks ensure accuracy and professionalism before publication or distribution.</p>
                    </div>

                    <h3>Critical Final Verifications</h3>
                    
                    <div class="final-checklist">
                        <div class="check-category priority-high">
                            <h4>üî¥ High Priority</h4>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Names and titles spelled correctly</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Contact information accurate</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Dates and deadlines correct</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Statistical data verified</span>
                            </div>
                        </div>
                        
                        <div class="check-category priority-medium">
                            <h4>üü° Medium Priority</h4>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Page numbers sequential</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Cross-references accurate</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Table of contents updated</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Hyperlinks functional</span>
                            </div>
                        </div>
                        
                        <div class="check-category priority-standard">
                            <h4>üü¢ Standard Checks</h4>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Headers and footers consistent</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>Print/PDF formatting correct</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-icon">‚ñ°</span>
                                <span>File name appropriate</span>
                            </div>
                        </div>
                    </div>

                    <h3>Create Your Proofreading Checklist</h3>
                    <div class="personal-checklist">
                        <p>Develop a personalized checklist based on your common errors and document requirements. Include:</p>
                        <ul>
                            <li>Your most frequent error types</li>
                            <li>Organization-specific style requirements</li>
                            <li>Document-type specific elements</li>
                            <li>Audience considerations</li>
                        </ul>
                    </div>

                    <div class="success-box">
                        <h4>üéâ Proofreading Mastery</h4>
                        <p>Systematic revision and proofreading transforms good writing into excellent communication. Your attention to detail enhances your professional credibility and ensures your message reaches readers clearly and effectively.</p>
                    </div>
                </div>

                <div class="quiz-panel" id="quiz-final-checks"></div>

                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('final-checks')">
                        Complete Chapter 16!
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <!-- Include JavaScript modules -->
    <script type="module" src="../shared/js/router.js"></script>
    <script type="module" src="../shared/js/quiz-engine.js"></script>
    <script type="module" src="../shared/js/progress.js"></script>
    <script type="module" src="../shared/js/components.js"></script>

    <script type="module">
        import { getChapterProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        
        const CHAPTER_ID = 'ch16';
        const sections = [
            { id: 'revision-principles', title: '16.01 Revision Principles' },
            { id: 'content-revision', title: '16.02 Content Revision' },
            { id: 'proofreading-techniques', title: '16.03 Proofreading Techniques' },
            { id: 'common-errors', title: '16.04 Common Errors' },
            { id: 'formatting-consistency', title: '16.05 Formatting & Consistency' },
            { id: 'final-checks', title: '16.06 Final Checks' }
        ];
        
        // Initialize section navigation
        function initSectionNavigation() {
            const tabLinks = document.querySelectorAll('.tab-link');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(this);
                });
            });
            
            // Show first section by default
            showSection('revision-principles');
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            activeLink.classList.add('active');
        }
        
        // Update progress bar
        function updateProgressBar() {
            const chapterProgress = getChapterProgress(CHAPTER_ID);
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const total = sections.length;
            const percentage = Math.round((completed / total) * 100);
            
            const progressCircle = document.querySelector('.progress-circle');
            const progressText = document.querySelector('.progress-text');
            
            if (progressCircle && progressText) {
                const circumference = 2 * Math.PI * 25; // r=25
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = `${percentage}%`;
            }
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Show completion message
            const currentSection = document.getElementById(sectionId);
            const button = currentSection.querySelector('.btn-primary');
            button.textContent = '‚úì Completed';
            button.classList.add('completed');
        }
        
        // Show completion modal if chapter is finished
        function checkChapterCompletion() {
            const chapterProgress = getChapterProgress(CHAPTER_ID);
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            
            if (completed === sections.length) {
                showCompletionModal();
            }
        }
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2>üéâ Chapter 16 Complete!</h2>
                    <p>Excellent work! You've mastered revision and proofreading techniques. Your writing will be more polished and professional.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/ch16-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 16');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
    </script>
</body>
</html>
