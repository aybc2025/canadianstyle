<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 12: Usage - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 12
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">12</div>
                <div>
                    <h1>Usage</h1>
                    <p>Common word choices and expressions in professional writing</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link active" data-section="introduction">12.01 Introduction</a>
                <a href="#prepositions" class="tab-link" data-section="prepositions">12.02 Prepositions</a>
                <a href="#affect-effect" class="tab-link" data-section="affect-effect">12.03 Affect vs Effect</a>
                <a href="#compose-comprise" class="tab-link" data-section="compose-comprise">12.04 Compose vs Comprise</a>
                <a href="#less-fewer" class="tab-link" data-section="less-fewer">12.05 Less vs Fewer</a>
                <a href="#that-which" class="tab-link" data-section="that-which">12.06 That vs Which</a>
                <a href="#common-errors" class="tab-link" data-section="common-errors">12.07 Common Errors</a>
                <a href="#idioms" class="tab-link" data-section="idioms">12.08 Canadian Idioms</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 12.01: Introduction -->
            <section class="content-section active" id="introduction">
                <div class="section-header">
                    <h2>12.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Correct word usage enhances clarity and credibility in professional writing.</p>
                    
                    <div class="info-box">
                        <h3>üìù Key Principles</h3>
                        <p>Good usage involves choosing words that convey your meaning precisely while following accepted conventions.</p>
                    </div>

                    <h3>Common Usage Challenges</h3>
                    <div class="rule-box">
                        <ul>
                            <li><strong>Confusing word pairs:</strong> affect/effect, less/fewer</li>
                            <li><strong>Preposition usage:</strong> Different from vs. different than</li>
                            <li><strong>Relative pronouns:</strong> that vs. which</li>
                            <li><strong>Verb forms:</strong> comprise vs. compose</li>
                        </ul>
                    </div>
                </div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.02: Prepositions -->
            <section class="content-section" id="prepositions">
                <div class="section-header">
                    <h2>12.02 Prepositions</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Prepositions show relationships between words. Choose the right one for precise meaning.</p>
                    
                    <div class="examples-box">
                        <h4>Common Preposition Pairs</h4>
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Preferred</th>
                                        <th>Avoid</th>
                                        <th>Example</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>different from</td>
                                        <td>different than</td>
                                        <td>This policy is different from the previous one</td>
                                    </tr>
                                    <tr>
                                        <td>comply with</td>
                                        <td>comply to</td>
                                        <td>Please comply with the new regulations</td>
                                    </tr>
                                    <tr>
                                        <td>prior to</td>
                                        <td>prior than</td>
                                        <td>Submit reports prior to the deadline</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-prepositions"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('prepositions')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.03: Affect vs Effect -->
            <section class="content-section" id="affect-effect">
                <div class="section-header">
                    <h2>12.03 Affect vs Effect</h2>
                </div>
                
                <div class="lesson-content">
                    <p>One of the most common usage errors involves confusing "affect" and "effect".</p>
                    
                    <div class="rule-box">
                        <h3>The Rule</h3>
                        <ul>
                            <li><strong>Affect:</strong> Verb meaning "to influence"</li>
                            <li><strong>Effect:</strong> Noun meaning "result" or "consequence"</li>
                        </ul>
                    </div>

                    <div class="examples-box">
                        <h4>Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Affect (verb):</strong> "The new policy will affect all employees."</p>
                        </div>
                        <div class="example-item good">
                            <p><strong>‚úì Effect (noun):</strong> "The effect of the policy was positive."</p>
                        </div>
                    </div>
                    
                    <div class="tip-box">
                        <h4>üí° Memory Trick</h4>
                        <p><strong>A</strong>ffect = <strong>A</strong>ction (verb)<br>
                        <strong>E</strong>ffect = <strong>E</strong>nd result (noun)</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-affect-effect"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('affect-effect')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.04: Compose vs Comprise -->
            <section class="content-section" id="compose-comprise">
                <div class="section-header">
                    <h2>12.04 Compose vs Comprise</h2>
                </div>
                
                <div class="lesson-content">
                    <p>These verbs describe how parts relate to wholes, but they work in opposite directions.</p>
                    
                    <div class="rule-box">
                        <h3>The Rule</h3>
                        <ul>
                            <li><strong>Compose:</strong> Parts compose the whole</li>
                            <li><strong>Comprise:</strong> The whole comprises the parts</li>
                        </ul>
                    </div>

                    <div class="examples-box">
                        <h4>Correct Usage</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Compose:</strong> "Ten provinces compose Canada."</p>
                        </div>
                        <div class="example-item good">
                            <p><strong>‚úì Comprise:</strong> "Canada comprises ten provinces."</p>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Wrong:</strong> "Canada is comprised of ten provinces."</p>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-compose-comprise"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('compose-comprise')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.05: Less vs Fewer -->
            <section class="content-section" id="less-fewer">
                <div class="section-header">
                    <h2>12.05 Less vs Fewer</h2>
                </div>
                
                <div class="lesson-content">
                    <p>The choice between "less" and "fewer" depends on whether you can count the items.</p>
                    
                    <div class="rule-box">
                        <h3>The Rule</h3>
                        <ul>
                            <li><strong>Fewer:</strong> Use with countable items (people, documents, errors)</li>
                            <li><strong>Less:</strong> Use with uncountable quantities (time, money, effort)</li>
                        </ul>
                    </div>

                    <div class="examples-box">
                        <h4>Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Fewer:</strong> "Fewer people attended this year."</p>
                        </div>
                        <div class="example-item good">
                            <p><strong>‚úì Less:</strong> "We have less time to complete the project."</p>
                        </div>
                        <div class="example-item good">
                            <p><strong>‚úì Less:</strong> "The project costs less money."</p>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-less-fewer"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('less-fewer')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.06: That vs Which -->
            <section class="content-section" id="that-which">
                <div class="section-header">
                    <h2>12.06 That vs Which</h2>
                </div>
                
                <div class="lesson-content">
                    <p>These relative pronouns introduce different types of clauses with distinct punctuation rules.</p>
                    
                    <div class="rule-box">
                        <h3>The Rule</h3>
                        <ul>
                            <li><strong>That:</strong> Introduces essential information (no commas)</li>
                            <li><strong>Which:</strong> Introduces additional information (use commas)</li>
                        </ul>
                    </div>

                    <div class="examples-box">
                        <h4>Examples</h4>
                        <div class="comparison-section">
                            <h5>Restrictive (That)</h5>
                            <ul>
                                <li>The report that we submitted yesterday was approved</li>
                                <li>Policies that violate the Charter will be reviewed</li>
                                <li>The office that handles complaints is on the second floor</li>
                            </ul>
                        </div>
                        
                        <div class="comparison-section">
                            <h5>Non-restrictive (Which)</h5>
                            <ul>
                                <li>Our policy, which was updated last year, is effective</li>
                                <li>The budget, which exceeds our projections, was approved</li>
                                <li>This document, which contains sensitive information, is confidential</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-that-which"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('that-which')">
                        Complete Section ‚Üí Common Errors
                    </button>
                </div>
            </section>

            <!-- Section 12.07: Common Errors -->
            <section class="content-section" id="common-errors">
                <div class="section-header">
                    <h2>12.07 Common Errors</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Frequently Confused Words</h3>
                    
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Word</th>
                                    <th>Meaning</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Principal</strong></td>
                                    <td>Main, most important</td>
                                    <td>The principal reason for the delay</td>
                                </tr>
                                <tr>
                                    <td><strong>Principle</strong></td>
                                    <td>Fundamental rule or belief</td>
                                    <td>The principle of fairness</td>
                                </tr>
                                <tr>
                                    <td><strong>Complement</strong></td>
                                    <td>To complete or make perfect</td>
                                    <td>The programs complement each other</td>
                                </tr>
                                <tr>
                                    <td><strong>Compliment</strong></td>
                                    <td>To praise</td>
                                    <td>She complimented his work</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-common-errors"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('common-errors')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 12.08: Canadian Idioms -->
            <section class="content-section" id="idioms">
                <div class="section-header">
                    <h2>12.08 Canadian Idioms</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Canadian English includes distinctive expressions and preferences that distinguish it from other varieties of English.</p>
                    
                    <div class="examples-box">
                        <h4>Canadian Expressions</h4>
                        <div class="canadian-terms">
                            <ul>
                                <li><strong>Washroom</strong> (not restroom or bathroom in public contexts)</li>
                                <li><strong>Hydro</strong> for electricity in some regions</li>
                                <li><strong>Parkade</strong> for parking garage (Western Canada)</li>
                                <li><strong>Serviette</strong> for napkin (some regions)</li>
                                <li><strong>Chesterfield</strong> for sofa (traditional, less common now)</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Government-Specific Usage</h3>
                    <div class="rule-box">
                        <ul>
                            <li><strong>Federal government:</strong> Government of Canada</li>
                            <li><strong>Crown corporations:</strong> Use specific names</li>
                            <li><strong>Parliamentary language:</strong> Follow House of Commons style</li>
                            <li><strong>Bilingual considerations:</strong> Consider French equivalents</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-idioms"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('idioms')">
                        Complete Chapter 12!
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch12';
        const sections = [
            { id: 'introduction', title: '12.01 Introduction' },
            { id: 'prepositions', title: '12.02 Prepositions' },
            { id: 'affect-effect', title: '12.03 Affect vs Effect' },
            { id: 'compose-comprise', title: '12.04 Compose vs Comprise' },
            { id: 'less-fewer', title: '12.05 Less vs Fewer' },
            { id: 'that-which', title: '12.06 That vs Which' },
            { id: 'common-errors', title: '12.07 Common Errors' },
            { id: 'idioms', title: '12.08 Canadian Idioms' }
        ];
        
        // ‚úÖ ◊î◊ï◊°◊§◊™ ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ showSection ◊î◊ó◊°◊®◊î
        function showSection(sectionId) {
            // ◊î◊°◊™◊®◊™ ◊õ◊ú ◊î◊ó◊ú◊ß◊ô◊ù
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
                section.style.display = 'none';
            });
            
            // ◊î◊¶◊í◊™ ◊î◊ó◊ú◊ß ◊î◊†◊ï◊õ◊ó◊ô
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.style.display = 'block';
            }
        }

        // ‚úÖ ◊î◊ï◊°◊§◊™ ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ updateActiveTab ◊î◊ó◊°◊®◊î
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        // ‚úÖ ◊î◊ï◊°◊§◊™ ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ initSectionNavigation ◊î◊ó◊°◊®◊î
        function initSectionNavigation() {
            const tabLinks = document.querySelectorAll('.tab-link');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(this);
                });
            });
            
            // ◊î◊¶◊í◊™ ◊î◊ó◊ú◊ß ◊î◊®◊ê◊©◊ï◊ü ◊õ◊ë◊®◊ô◊®◊™ ◊û◊ó◊ì◊ú
            showSection('introduction');
        }
        
        // ‚úÖ ◊î◊ï◊°◊§◊™ ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ updateProgressBar ◊î◊ó◊°◊®◊î
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            const progressBar = document.getElementById('chapterProgress');
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
        }
        
        // ‚úÖ ◊™◊ô◊ß◊ï◊ü ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ completeSection
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex !== -1 && currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        // ‚úÖ ◊î◊ï◊°◊§◊™ ◊§◊ï◊†◊ß◊¶◊ô◊ô◊™ showCompletionModal ◊î◊ó◊°◊®◊î
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>üéâ Chapter 12 Complete!</h3>
                    <p>You've mastered proper word usage! Your writing will now be more precise, clear, and professionally Canadian.</p>
                    <div class="modal-buttons">
                        <button onclick="window.location.href='../index.html'" class="btn btn-primary">
                            Back to Dashboard
                        </button>
                        <button onclick="window.location.href='ch13.html'" class="btn btn-secondary">
                            Next Chapter: Plain Language
                        </button>
                    </div>
                </div>
            `;
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            document.body.appendChild(modal);
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
    try {
        console.log(`Loading quiz data for ${CHAPTER_ID}...`);
        
        const response = await fetch(`../data/${CHAPTER_ID}-quiz.json`);
        if (!response.ok) {
            console.warn(`Quiz file not found: ${CHAPTER_ID}-quiz.json`);
            return;
        }
        
        const quizData = await response.json();
        
        if (!quizData.sections) {
            console.warn(`No sections found in quiz data for ${CHAPTER_ID}`);
            return;
        }
        
        let successCount = 0;
        
        sections.forEach(section => {
            const htmlSectionId = section.id;
            const availableQuizSections = Object.keys(quizData.sections);
            let quizSectionId = null;
            let matchType = '';
            
            // Strategy 1: Direct match
            if (quizData.sections[htmlSectionId]) {
                quizSectionId = htmlSectionId;
                matchType = 'direct';
            }
            // Strategy 2: Fuzzy match by keywords
            else {
                const htmlWords = htmlSectionId.split('-');
                const fuzzyMatch = availableQuizSections.find(quizId => {
                    const quizWords = quizId.split('-');
                    return htmlWords.some(word => 
                        quizWords.includes(word) || 
                        quizId.includes(word) ||
                        (word.length > 3 && quizId.includes(word.substring(0, 4)))
                    );
                });
                
                if (fuzzyMatch) {
                    quizSectionId = fuzzyMatch;
                    matchType = 'fuzzy';
                }
            }
            
            // Create quiz if we found a match
            if (quizSectionId && quizData.sections[quizSectionId]) {
                const sectionQuizData = quizData.sections[quizSectionId];
                
                if (sectionQuizData.questions && sectionQuizData.questions.length > 0) {
                    const quizContainer = document.getElementById(`quiz-${htmlSectionId}`);
                    
                    if (quizContainer) {
                        console.log(`‚úÖ Creating quiz for "${htmlSectionId}" using "${quizSectionId}" (${matchType}) - ${sectionQuizData.questions.length} questions`);
                        
                        const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, htmlSectionId);
                        quizEngine.render(quizContainer);
                        successCount++;
                    } else {
                        console.warn(`üì¶ Quiz container not found: quiz-${htmlSectionId}`);
                    }
                } else {
                    console.warn(`‚ùì No questions found in section ${quizSectionId}`);
                }
            } else {
                console.log(`‚ùå No quiz match found for "${htmlSectionId}"`);
            }
        });
        
        console.log(`üéØ Successfully loaded ${successCount}/${sections.length} quizzes for ${CHAPTER_ID}`);
        
    } catch (error) {
        console.error(`üí• Error loading quiz data for ${CHAPTER_ID}:`, error);
    }
}
        
        // ‚úÖ ◊î◊®◊¶◊™ ◊õ◊ú ◊î◊§◊ï◊†◊ß◊¶◊ô◊ï◊™ ◊ú◊ê◊ó◊® ◊ò◊¢◊ô◊†◊™ ◊î◊ì◊£
        document.addEventListener('DOMContentLoaded', function() {
            initSectionNavigation();
            updateProgressBar();
            loadSectionQuizzes();
        });
    </script>

</body>
</html>
