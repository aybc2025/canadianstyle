<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 15: Geographical Names - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 15
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">15</div>
                <div>
                    <h1>Geographical Names</h1>
                    <p>Correct spellings and forms for place names</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">15.01 Introduction</a>
                <a href="#canadian-places" class="tab-link" data-section="canadian-places">15.02 Canadian Places</a>
                <a href="#foreign-places" class="tab-link" data-section="foreign-places">15.03 Foreign Places</a>
                <a href="#adjectives" class="tab-link" data-section="adjectives">15.04 Geographical Adjectives</a>
                <a href="#provinces-territories" class="tab-link" data-section="provinces-territories">15.05 Provinces & Territories</a>
                <a href="#abbreviations" class="tab-link" data-section="abbreviations">15.06 Abbreviations</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 15.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>15.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Geographical names present special challenges in writing. They must be treated 
                    consistently and with respect for local preferences and official designations.</p>
                    
                    <p>This chapter covers the proper treatment of place names, from small communities 
                    to countries, and the adjectives and nouns derived from them.</p>
                    
                    <div class="key-principles">
                        <h3>Key Principles</h3>
                        <ul>
                            <li>Use official names when available</li>
                            <li>Respect local spelling preferences</li>
                            <li>Be consistent within a document</li>
                            <li>Consider your audience's familiarity</li>
                            <li>Use current, not historical names</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Complete Section → Canadian Places
                    </button>
                </div>
            </section>

            <!-- Section 15.02: Canadian Places -->
            <section class="content-section" id="canadian-places">
                <div class="section-header">
                    <h2>15.02 Canadian Places</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Official Sources</h3>
                    <p>For Canadian place names, consult authoritative sources:</p>
                    <ul>
                        <li><strong>Canadian Geographical Names Database:</strong> The official source</li>
                        <li><strong>Natural Resources Canada:</strong> Federal naming authority</li>
                        <li><strong>Provincial geographical naming boards:</strong> Local authorities</li>
                        <li><strong>Statistics Canada:</strong> For census divisions</li>
                    </ul>

                    <h3>Common Spelling Issues</h3>
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Correct</th>
                                    <th>Common Error</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Winnipeg</td>
                                    <td>Winnepeg</td>
                                </tr>
                                <tr>
                                    <td>Saskatchewan</td>
                                    <td>Saskatchawan</td>
                                </tr>
                                <tr>
                                    <td>Yukon</td>
                                    <td>The Yukon</td>
                                </tr>
                                <tr>
                                    <td>Nunavut</td>
                                    <td>Nunuvut</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>French Place Names</h3>
                    <p>Respect official French spellings and formatting:</p>
                    <div class="examples-grid">
                        <div class="example-card avoid">
                            <h4>❌ Avoid</h4>
                            <p>St-Jean-sur-Richelieu<br>
                            St. John's, Newfoundland<br>
                            Saint John, New Brunswick<br>
                            (confusing the two cities)</p>
                        </div>
                        <div class="example-card prefer">
                            <h4>✅ Prefer</h4>
                            <p>Saint-Jean-sur-Richelieu<br>
                            St. John's, Newfoundland and Labrador<br>
                            Saint John, New Brunswick<br>
                            (clear distinction)</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-canadian-places"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('canadian-places')">
                        Complete Section → Foreign Places
                    </button>
                </div>
            </section>

            <!-- Section 15.03: Foreign Places -->
            <section class="content-section" id="foreign-places">
                <div class="section-header">
                    <h2>15.03 Foreign Places</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Current vs. Historical Names</h3>
                    <p>Use current, internationally recognized names:</p>
                    
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Current Name</th>
                                    <th>Former Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mumbai</td>
                                    <td>Bombay</td>
                                </tr>
                                <tr>
                                    <td>Beijing</td>
                                    <td>Peking</td>
                                </tr>
                                <tr>
                                    <td>Ho Chi Minh City</td>
                                    <td>Saigon</td>
                                </tr>
                                <tr>
                                    <td>Myanmar</td>
                                    <td>Burma</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>English Forms vs. Local Forms</h3>
                    <p>Use commonly accepted English forms for international audience:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card prefer">
                            <h4>✅ English Forms</h4>
                            <ul>
                                <li>Rome (not Roma)</li>
                                <li>Munich (not München)</li>
                                <li>Florence (not Firenze)</li>
                                <li>Moscow (not Moskva)</li>
                            </ul>
                        </div>
                        <div class="example-card consider">
                            <h4>🤔 Consider Context</h4>
                            <p>Use local forms when:</p>
                            <ul>
                                <li>Writing for local audience</li>
                                <li>Discussing local culture</li>
                                <li>Citing official documents</li>
                                <li>Showing respect for local preferences</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Disputed or Sensitive Names</h3>
                    <ul>
                        <li>Use neutral, widely accepted terms</li>
                        <li>Consider your audience's perspective</li>
                        <li>Provide context when necessary</li>
                        <li>Consult recent authoritative sources</li>
                    </ul>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-foreign-places"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('foreign-places')">
                        Complete Section → Geographical Adjectives
                    </button>
                </div>
            </section>

            <!-- Section 15.04: Geographical Adjectives -->
            <section class="content-section" id="adjectives">
                <div class="section-header">
                    <h2>15.04 Geographical Adjectives</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Forming Adjectives</h3>
                    <p>Geographical adjectives (demonyms) can be tricky:</p>
                    
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Place</th>
                                    <th>Adjective/Noun</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Canada</td>
                                    <td>Canadian</td>
                                    <td>Canadian policies</td>
                                </tr>
                                <tr>
                                    <td>Nova Scotia</td>
                                    <td>Nova Scotian</td>
                                    <td>Nova Scotian lobster</td>
                                </tr>
                                <tr>
                                    <td>Calgary</td>
                                    <td>Calgarian</td>
                                    <td>Calgarian residents</td>
                                </tr>
                                <tr>
                                    <td>Montreal</td>
                                    <td>Montrealer</td>
                                    <td>Montrealer attitudes</td>
                                </tr>
                                <tr>
                                    <td>Prince Edward Island</td>
                                    <td>Prince Edward Islander</td>
                                    <td>Islander traditions</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>International Examples</h3>
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>✅ Correct Forms</h4>
                            <ul>
                                <li>European Union (not Europe Union)</li>
                                <li>Asian markets (not Asia markets)</li>
                                <li>American policy (not America policy)</li>
                                <li>African nations (not Africa nations)</li>
                            </ul>
                        </div>
                        <div class="example-card good">
                            <h4>✅ People References</h4>
                            <ul>
                                <li>Torontonians (not Toronto people)</li>
                                <li>New Yorkers (not New York people)</li>
                                <li>Londoners (not London people)</li>
                                <li>Parisians (not Paris people)</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Special Cases</h3>
                    <ul>
                        <li><strong>United States:</strong> American (not US-ian)</li>
                        <li><strong>United Kingdom:</strong> British (for the country), English/Scottish/Welsh/Northern Irish (for regions)</li>
                        <li><strong>Netherlands:</strong> Dutch (not Netherlandish)</li>
                        <li><strong>Switzerland:</strong> Swiss (not Switzerlandish)</li>
                    </ul>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-adjectives"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('adjectives')">
                        Complete Section → Provinces & Territories
                    </button>
                </div>
            </section>

            <!-- Section 15.05: Provinces & Territories -->
            <section class="content-section" id="provinces-territories">
                <div class="section-header">
                    <h2>15.05 Provinces & Territories</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Full Names vs. Abbreviations</h3>
                    <p>Spell out province and territory names in running text. Use abbreviations only in addresses, tables, and lists where space is limited.</p>

                    <h3>Postal Abbreviations</h3>
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Province/Territory</th>
                                    <th>Postal Code</th>
                                    <th>Traditional Abbrev.</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Alberta</td>
                                    <td>AB</td>
                                    <td>Alta.</td>
                                </tr>
                                <tr>
                                    <td>British Columbia</td>
                                    <td>BC</td>
                                    <td>B.C.</td>
                                </tr>
                                <tr>
                                    <td>Manitoba</td>
                                    <td>MB</td>
                                    <td>Man.</td>
                                </tr>
                                <tr>
                                    <td>New Brunswick</td>
                                    <td>NB</td>
                                    <td>N.B.</td>
                                </tr>
                                <tr>
                                    <td>Newfoundland and Labrador</td>
                                    <td>NL</td>
                                    <td>N.L.</td>
                                </tr>
                                <tr>
                                    <td>Northwest Territories</td>
                                    <td>NT</td>
                                    <td>N.W.T.</td>
                                </tr>
                                <tr>
                                    <td>Nova Scotia</td>
                                    <td>NS</td>
                                    <td>N.S.</td>
                                </tr>
                                <tr>
                                    <td>Nunavut</td>
                                    <td>NU</td>
                                    <td>Nvt.</td>
                                </tr>
                                <tr>
                                    <td>Ontario</td>
                                    <td>ON</td>
                                    <td>Ont.</td>
                                </tr>
                                <tr>
                                    <td>Prince Edward Island</td>
                                    <td>PE</td>
                                    <td>P.E.I.</td>
                                </tr>
                                <tr>
                                    <td>Quebec</td>
                                    <td>QC</td>
                                    <td>Que.</td>
                                </tr>
                                <tr>
                                    <td>Saskatchewan</td>
                                    <td>SK</td>
                                    <td>Sask.</td>
                                </tr>
                                <tr>
                                    <td>Yukon</td>
                                    <td>YT</td>
                                    <td>Y.T.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>Important Notes</h3>
                    <ul>
                        <li><strong>Newfoundland and Labrador:</strong> Use the full name; abbreviation is NL (not the old NF)</li>
                        <li><strong>Yukon:</strong> Just "Yukon," not "the Yukon" or "Yukon Territory"</li>
                        <li><strong>Quebec vs. Québec:</strong> Use accent in French contexts, plain "Quebec" in English</li>
                        <li><strong>Northwest Territories:</strong> Plural "Territories"</li>
                    </ul>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-provinces-territories"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('provinces-territories')">
                        Complete Section → Abbreviations
                    </button>
                </div>
            </section>

            <!-- Section 15.06: Abbreviations -->
            <section class="content-section" id="abbreviations">
                <div class="section-header">
                    <h2>15.06 Abbreviations</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>When to Abbreviate</h3>
                    <p>Abbreviate geographical names only when:</p>
                    <ul>
                        <li>Space is extremely limited (tables, lists, addresses)</li>
                        <li>Standard abbreviations are well-known to your audience</li>
                        <li>Consistency requires it (all entries in a table)</li>
                        <li>The abbreviation appears in official documents you're citing</li>
                    </ul>

                    <h3>International Abbreviations</h3>
                    <div class="replacement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Country</th>
                                    <th>ISO Code</th>
                                    <th>Common Abbrev.</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>United States</td>
                                    <td>US</td>
                                    <td>U.S.</td>
                                </tr>
                                <tr>
                                    <td>United Kingdom</td>
                                    <td>GB</td>
                                    <td>U.K.</td>
                                </tr>
                                <tr>
                                    <td>European Union</td>
                                    <td>EU</td>
                                    <td>E.U.</td>
                                </tr>
                                <tr>
                                    <td>Russian Federation</td>
                                    <td>RU</td>
                                    <td>Russia</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>Street and Address Abbreviations</h3>
                    <div class="examples-grid">
                        <div class="example-card prefer">
                            <h4>✅ Standard Abbreviations</h4>
                            <ul>
                                <li>St. (Street)</li>
                                <li>Ave. (Avenue)</li>
                                <li>Blvd. (Boulevard)</li>
                                <li>Rd. (Road)</li>
                                <li>Dr. (Drive)</li>
                                <li>Cres. (Crescent)</li>
                            </ul>
                        </div>
                        <div class="example-card consider">
                            <h4>🤔 Consider Context</h4>
                            <p>In formal documents, spell out:</p>
                            <ul>
                                <li>Geographic names in running text</li>
                                <li>Names in document titles</li>
                                <li>First mention of places</li>
                                <li>When clarity is paramount</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Consistency Guidelines</h3>
                    <ul>
                        <li>Be consistent throughout a document</li>
                        <li>Establish abbreviation patterns early</li>
                        <li>Consider your audience's familiarity</li>
                        <li>Provide a list of abbreviations if many are used</li>
                        <li>When in doubt, spell it out</li>
                    </ul>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-abbreviations"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('abbreviations')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch15';
        const sections = [
            { id: 'introduction', title: '15.01 Introduction' },
            { id: 'canadian-places', title: '15.02 Canadian Places' },
            { id: 'foreign-places', title: '15.03 Foreign Places' },
            { id: 'adjectives', title: '15.04 Geographical Adjectives' },
            { id: 'provinces-territories', title: '15.05 Provinces & Territories' },
            { id: 'abbreviations', title: '15.06 Abbreviations' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>🎉 Chapter 15 Complete!</h3>
                    <p>You've mastered geographical names and their proper usage. 
                    Your writing will now accurately reflect Canadian and international place names.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Section navigation
        function initSectionNavigation() {
            const tabs = document.querySelectorAll('.tab-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.getAttribute('data-section');
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show/hide sections
                    const sections = document.querySelectorAll('.content-section');
                    sections.forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(sectionId).classList.add('active');
                    
                    // Update URL hash
                    window.location.hash = sectionId;
                });
            });
            
            // Handle initial hash
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash)) {
                const tab = document.querySelector(`[data-section="${hash}"]`);
                if (tab) tab.click();
            } else {
                // Default to first section
                tabs[0]?.click();
            }
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/ch15-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 15');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>
