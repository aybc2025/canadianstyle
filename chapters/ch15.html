<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 15: Geographical Names - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 15
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">15</div>
                <div>
                    <h1>Geographical Names</h1>
                    <p>Standard forms and proper treatment of place names</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">15.01 Introduction</a>
                <a href="#official-names" class="tab-link" data-section="official-names">15.02 Official Names</a>
                <a href="#generic-specific" class="tab-link" data-section="generic-specific">15.03 Generic & Specific</a>
                <a href="#abbreviations" class="tab-link" data-section="abbreviations">15.04 Abbreviations</a>
                <a href="#translation" class="tab-link" data-section="translation">15.05 Translation</a>
                <a href="#canadian-significance" class="tab-link" data-section="canadian-significance">15.06 Canadian Significance</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 15.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>15.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Geographical names require consistent treatment in government documents. Proper handling of place names shows respect for communities and ensures clarity in communication. The Geographical Names Board of Canada provides authoritative guidance for Canadian place names.</p>
                    
                    <h3>Key Principles</h3>
                    <ul>
                        <li><strong>Authority:</strong> Use official forms approved by naming authorities</li>
                        <li><strong>Consistency:</strong> Apply the same forms throughout your document</li>
                        <li><strong>Respect:</strong> Honor local preferences and historical usage</li>
                        <li><strong>Clarity:</strong> Choose forms that best serve your readers</li>
                    </ul>
                    
                    <div class="rule-box">
                        <h4>Sources of Authority</h4>
                        <ul>
                            <li><strong>Canada:</strong> Geographical Names Board of Canada</li>
                            <li><strong>Provincial/Territorial:</strong> Provincial naming authorities</li>
                            <li><strong>International:</strong> United Nations Group of Experts on Geographical Names</li>
                            <li><strong>Foreign countries:</strong> National naming authorities</li>
                        </ul>
                    </div>
                    
                    <div class="tip-box">
                        <h4>üí° Modern Considerations</h4>
                        <p>Geographical names evolve over time. Indigenous place names are increasingly being restored or given official recognition alongside colonial names.</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Complete Section ‚Üí Official Names
                    </button>
                </div>
            </section>

            <!-- Section 15.02: Official Names -->
            <section class="content-section" id="official-names">
                <div class="section-header">
                    <h2>15.02 Official Names and Authority</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Using Authorized Forms</h3>
                    <p>Always use the official, authorized form of geographical names as established by competent naming authorities:</p>
                    
                    <div class="rule-box">
                        <h4>Canadian Official Names</h4>
                        <ul>
                            <li><strong>Cities:</strong> Toronto, Vancouver, Montr√©al, Qu√©bec</li>
                            <li><strong>Provinces:</strong> British Columbia, Newfoundland and Labrador</li>
                            <li><strong>Territories:</strong> Northwest Territories, Nunavut</li>
                            <li><strong>Features:</strong> Lake Superior, Rocky Mountains, Bay of Fundy</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Official vs. Common Usage</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Official forms (use these):</strong></p>
                            <ul>
                                <li>Newfoundland and Labrador (not "Newfoundland")</li>
                                <li>Prince Edward Island (not "P.E.I." in formal writing)</li>
                                <li>Northwest Territories (not "NWT")</li>
                                <li>Yukon (not "Yukon Territory")</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Informal or outdated forms:</strong></p>
                            <ul>
                                <li>The Territories (ambiguous)</li>
                                <li>The Maritimes (use specific province names)</li>
                                <li>Upper Canada, Lower Canada (historical only)</li>
                                <li>Eskimo Point (now Arviat)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>International Names</h4>
                        <ul>
                            <li>Use forms adopted by the country concerned</li>
                            <li>Consider your audience's familiarity with the names</li>
                            <li>Provide alternatives in parentheses when helpful</li>
                            <li>Follow UN conventions for disputed territories</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>International Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Preferred international forms:</strong></p>
                            <ul>
                                <li>Beijing (not Peking)</li>
                                <li>Mumbai (not Bombay)</li>
                                <li>Kyiv (not Kiev)</li>
                                <li>T√ºrkiye (officially changed from Turkey in 2022)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-official-names"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('official-names')">
                        Complete Section ‚Üí Generic & Specific
                    </button>
                </div>
            </section>

            <!-- Section 15.03: Generic and Specific Elements -->
            <section class="content-section" id="generic-specific">
                <div class="section-header">
                    <h2>15.03 Generic and Specific Elements</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Understanding Name Components</h3>
                    <p>Geographical names typically consist of two parts: the specific element (unique identifier) and the generic element (type of feature):</p>
                    
                    <div class="rule-box">
                        <h4>Elements Defined</h4>
                        <ul>
                            <li><strong>Specific element:</strong> The unique part that distinguishes the place (Ottawa, Superior, Rocky)</li>
                            <li><strong>Generic element:</strong> The type of geographical feature (River, Lake, Mountains)</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Breaking Down Names</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Identifying elements:</strong></p>
                            <ul>
                                <li><strong>Ottawa River:</strong> Ottawa (specific) + River (generic)</li>
                                <li><strong>Lake Superior:</strong> Lake (generic) + Superior (specific)</li>
                                <li><strong>Rocky Mountains:</strong> Rocky (specific) + Mountains (generic)</li>
                                <li><strong>Hudson Bay:</strong> Hudson (specific) + Bay (generic)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Capitalization Rules</h4>
                        <ul>
                            <li><strong>Specific elements:</strong> Always capitalize</li>
                            <li><strong>Generic elements:</strong> Capitalize when part of the official name</li>
                            <li><strong>Plural generics:</strong> Usually lowercase when referring to multiple features</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Capitalization Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Official names (capitalize both):</strong></p>
                            <ul>
                                <li>Peace River (town and river)</li>
                                <li>Thunder Bay (city)</li>
                                <li>Great Bear Lake</li>
                                <li>Mackenzie River</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Generic references (lowercase generic):</strong></p>
                            <ul>
                                <li>the Ottawa and St. Lawrence rivers</li>
                                <li>the Great Lakes region</li>
                                <li>the Selkirk and Rocky mountains</li>
                                <li>Georgian and James bays</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tip-box">
                        <h4>üí° When in Doubt</h4>
                        <p>Check the official gazetteer or geographical names database. The Canadian Geographical Names Database provides authoritative forms for Canadian place names.</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-generic-specific"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('generic-specific')">
                        Complete Section ‚Üí Abbreviations
                    </button>
                </div>
            </section>

            <!-- Section 15.04: Abbreviations -->
            <section class="content-section" id="abbreviations">
                <div class="section-header">
                    <h2>15.04 Abbreviations and Shortened Forms</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>When and How to Abbreviate</h3>
                    <p>Use abbreviations for geographical names sparingly in formal writing, but understand standard forms for addresses and technical documents:</p>
                    
                    <div class="rule-box">
                        <h4>Standard Provincial/Territorial Abbreviations</h4>
                        <ul>
                            <li><strong>AB</strong> Alberta</li>
                            <li><strong>BC</strong> British Columbia</li>
                            <li><strong>MB</strong> Manitoba</li>
                            <li><strong>NB</strong> New Brunswick</li>
                            <li><strong>NL</strong> Newfoundland and Labrador</li>
                            <li><strong>NS</strong> Nova Scotia</li>
                            <li><strong>NT</strong> Northwest Territories</li>
                            <li><strong>NU</strong> Nunavut</li>
                            <li><strong>ON</strong> Ontario</li>
                            <li><strong>PE</strong> Prince Edward Island</li>
                            <li><strong>QC</strong> Quebec</li>
                            <li><strong>SK</strong> Saskatchewan</li>
                            <li><strong>YT</strong> Yukon</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>When to Use Abbreviations</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Appropriate contexts:</strong></p>
                            <ul>
                                <li><strong>Addresses:</strong> 123 Main Street, Toronto ON  M5V 3A8</li>
                                <li><strong>Tables and charts:</strong> Population by province (ON, QC, BC...)</li>
                                <li><strong>Technical documents:</strong> Station coordinates (lat./long.)</li>
                                <li><strong>Space constraints:</strong> Maps, labels, captions</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Avoid in formal text:</strong></p>
                            <ul>
                                <li>The conference will be held in TO next month.</li>
                                <li>BC's economy depends on natural resources.</li>
                                <li>The PM visited NL last week.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Geographic Feature Abbreviations</h4>
                        <ul>
                            <li><strong>Mt.</strong> Mount (Mount Royal ‚Üí Mt. Royal)</li>
                            <li><strong>St./Ste.</strong> Saint/Sainte (St. John's, Ste. Marie)</li>
                            <li><strong>Ft.</strong> Fort (Ft. McMurray)</li>
                            <li><strong>Co.</strong> County (in some contexts)</li>
                        </ul>
                    </div>
                    
                    <div class="tip-box">
                        <h4>üí° Consistency Rule</h4>
                        <p>If you abbreviate one element in a series, abbreviate all similar elements. Don't mix "Ontario" and "QC" in the same list.</p>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Consistent Usage</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Consistent abbreviation:</strong></p>
                            <ul>
                                <li>Offices in ON, QC, BC, and AB</li>
                                <li>Offices in Ontario, Quebec, British Columbia, and Alberta</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Mixed styles:</strong></p>
                            <ul>
                                <li>Offices in Ontario, QC, British Columbia, and AB</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-abbreviations"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('abbreviations')">
                        Complete Section ‚Üí Translation
                    </button>
                </div>
            </section>

            <!-- Section 15.05: Translation -->
            <section class="content-section" id="translation">
                <div class="section-header">
                    <h2>15.05 Translation and Bilingual Names</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Handling Names in Canada's Official Languages</h3>
                    <p>Canada's bilingual nature requires careful attention to geographical names in both English and French:</p>
                    
                    <div class="rule-box">
                        <h4>Translation Principles</h4>
                        <ul>
                            <li><strong>Official names:</strong> Use the authorized form in each language</li>
                            <li><strong>No direct translation:</strong> Don't translate names yourself</li>
                            <li><strong>Established forms:</strong> Some places have different names in each language</li>
                            <li><strong>Context matters:</strong> Consider your document's primary language</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Bilingual Place Names</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Official bilingual forms:</strong></p>
                            <ul>
                                <li><strong>English:</strong> Montreal ‚Üí <strong>French:</strong> Montr√©al</li>
                                <li><strong>English:</strong> Quebec City ‚Üí <strong>French:</strong> Ville de Qu√©bec</li>
                                <li><strong>English:</strong> St. Lawrence River ‚Üí <strong>French:</strong> fleuve Saint-Laurent</li>
                                <li><strong>English:</strong> Thousand Islands ‚Üí <strong>French:</strong> Mille-√éles</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Federal Document Guidelines</h4>
                        <ul>
                            <li>Use the form appropriate to your document's language</li>
                            <li>In bilingual documents, provide both forms when first mentioned</li>
                            <li>For places of national significance, consider both official forms</li>
                            <li>Follow Treasury Board guidelines for federal communications</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Bilingual Document Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì First mention in bilingual context:</strong></p>
                            <ul>
                                <li>The conference will be held in Ottawa (Ontario) / Ottawa (Ontario).</li>
                                <li>St. Lawrence River / fleuve Saint-Laurent shipping data</li>
                                <li>Gatineau, Quebec / Gatineau (Qu√©bec)</li>
                            </ul>
                        </div>
                        <div class="example-item good">
                            <p><strong>‚úì Subsequent mentions:</strong></p>
                            <ul>
                                <li>Use the form appropriate to your document's primary language</li>
                                <li>In English documents: "The Ottawa meeting..."</li>
                                <li>In French documents: "La r√©union d'Ottawa..."</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Avoid These Mistakes</h4>
                        <ul>
                            <li>Don't create your own translations</li>
                            <li>Don't assume English and French names are always similar</li>
                            <li>Don't use outdated or unofficial translated forms</li>
                            <li>Don't mix languages within the same name</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-translation"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('translation')">
                        Complete Section ‚Üí Canadian Significance
                    </button>
                </div>
            </section>

            <!-- Section 15.06: Canadian Significance -->
            <section class="content-section" id="canadian-significance">
                <div class="section-header">
                    <h2>15.06 Names of Pan-Canadian Significance</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Nationally Important Geographical Names</h3>
                    <p>Some geographical names have special significance for all Canadians and require particular attention in federal documents:</p>
                    
                    <div class="rule-box">
                        <h4>Pan-Canadian Places</h4>
                        <ul>
                            <li><strong>National capital:</strong> Ottawa (Ontario)</li>
                            <li><strong>Provincial capitals:</strong> Victoria, Edmonton, Regina, Winnipeg, Toronto, Quebec City, Fredericton, Halifax, Charlottetown, St. John's</li>
                            <li><strong>Major geographic features:</strong> Great Lakes, Rocky Mountains, Canadian Shield, Arctic Archipelago</li>
                            <li><strong>Historic sites:</strong> Plains of Abraham, Fortress of Louisbourg, Head-Smashed-In Buffalo Jump</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Proper Treatment of National Significance</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Appropriate recognition:</strong></p>
                            <ul>
                                <li>The National Capital Region includes Ottawa and Gatineau.</li>
                                <li>The Rocky Mountains extend from British Columbia to New Mexico.</li>
                                <li>The Great Lakes form part of the Canada-US border.</li>
                                <li>Nunavut, Canada's newest territory, was created in 1999.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Indigenous Place Names</h4>
                        <ul>
                            <li>Respect traditional names and their meanings</li>
                            <li>Use current official forms adopted by naming authorities</li>
                            <li>Consider providing explanations of Indigenous names when appropriate</li>
                            <li>Be aware of ongoing name restoration initiatives</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Indigenous Name Examples</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Respectful treatment:</strong></p>
                            <ul>
                                <li>Nunavut (meaning "our land" in Inuktitut)</li>
                                <li>Iqaluit, capital of Nunavut</li>
                                <li>Gwich'in Territory in the Northwest Territories</li>
                                <li>Haida Gwaii (formerly Queen Charlotte Islands)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Regional Designations</h4>
                        <ul>
                            <li><strong>Atlantic Canada:</strong> New Brunswick, Nova Scotia, Prince Edward Island, Newfoundland and Labrador</li>
                            <li><strong>Central Canada:</strong> Ontario and Quebec</li>
                            <li><strong>Western Canada:</strong> Manitoba, Saskatchewan, Alberta, British Columbia</li>
                            <li><strong>Northern Canada:</strong> Yukon, Northwest Territories, Nunavut</li>
                        </ul>
                    </div>
                    
                    <div class="tip-box">
                        <h4>üí° Evolving Names</h4>
                        <p>Geographical names reflect our evolving understanding of history and respect for Indigenous peoples. Stay current with official name changes and updates from the Geographical Names Board of Canada.</p>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Regional Usage</h4>
                        <div class="example-item good">
                            <p><strong>‚úì Clear regional references:</strong></p>
                            <ul>
                                <li>The Atlantic provinces face unique economic challenges.</li>
                                <li>Western Canada's energy sector drives the national economy.</li>
                                <li>Northern communities require specialized infrastructure.</li>
                                <li>Central Canada contains the majority of the population.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>‚úó Vague or outdated terms:</strong></p>
                            <ul>
                                <li>The Maritimes (specify which provinces)</li>
                                <li>The West (too broad - could mean anything west of Ontario)</li>
                                <li>The Territories (specify which territory/territories)</li>
                                <li>Upper and Lower Canada (historical terms only)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-canadian-significance"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('canadian-significance')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch15';
        const sections = [
            { id: 'introduction', title: '15.01 Introduction' },
            { id: 'official-names', title: '15.02 Official Names' },
            { id: 'generic-specific', title: '15.03 Generic & Specific' },
            { id: 'abbreviations', title: '15.04 Abbreviations' },
            { id: 'translation', title: '15.05 Translation' },
            { id: 'canadian-significance', title: '15.06 Canadian Significance' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        // Section navigation
        function initSectionNavigation() {
            const tabs = document.querySelectorAll('.tab-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(tab);
                    window.location.hash = sectionId;
                });
            });
            
            // Handle initial hash
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash)) {
                const tab = document.querySelector(`[data-section="${hash}"]`);
                if (tab) {
                    showSection(hash);
                    updateActiveTab(tab);
                }
            } else {
                // Default to first section
                showSection('introduction');
                updateActiveTab(tabs[0]);
            }
        }
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>üéâ Chapter 15 Complete!</h3>
                    <p>Your writing will now accurately reflect Canadian and international place names.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/ch15-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 15');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
    </script>
</body>
</html>
