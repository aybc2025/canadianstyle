<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 8: Quotations & Quotation Marks - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 8
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">8</div>
                <div>
                    <h1>Quotations & Quotation Marks</h1>
                    <p>Proper quotation format and punctuation rules</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">8.01 Introduction</a>
                <a href="#quotation-marks" class="tab-link" data-section="quotation-marks">8.02 Quotation Marks</a>
                <a href="#nested-quotations" class="tab-link" data-section="nested-quotations">8.15 Nested Quotations</a>
                <a href="#block-quotations" class="tab-link" data-section="block-quotations">8.20 Block Quotations</a>
                <a href="#omissions-insertions" class="tab-link" data-section="omissions-insertions">8.25 Omissions & Insertions</a>
                <a href="#punctuation" class="tab-link" data-section="punctuation">8.30 Punctuation</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 8.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>8.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Quotations require careful attention to format, punctuation, and accuracy. This chapter covers the conventions for incorporating other people's words into your writing.</p>
                    
                    <div class="key-principles">
                        <h3>Key Principles</h3>
                        <ul>
                            <li>Maintain complete accuracy in quoted material</li>
                            <li>Use quotation marks to distinguish others' words</li>
                            <li>Follow Canadian punctuation conventions</li>
                            <li>Introduce quotations clearly and grammatically</li>
                            <li>Use block format for long quotations</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Accuracy is Essential</h4>
                        <p>Never alter quotations without clear indication. Use [sic] for errors in the original, and brackets [ ] for your clarifications.</p>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Complete Section ‚Üí Quotation Marks
                    </button>
                </div>
            </section>

            <!-- Section 8.02: Quotation Marks -->
            <section class="content-section" id="quotation-marks">
                <div class="section-header">
                    <h2>8.02 Quotation Marks</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Basic Usage</h3>
                    <p>Use double quotation marks (" ") for direct quotations:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Direct Quotations</h4>
                            <p>The minister said, "We will proceed with the plan."<br>
                            "This is unacceptable," replied the opposition leader.<br>
                            The report states, "Funding will increase by 15%."</p>
                        </div>
                        <div class="example-card avoid">
                            <h4>‚ùå Indirect Quotations</h4>
                            <p>The minister said that "they would proceed."<br>
                            She mentioned that "it was important."</p>
                        </div>
                    </div>
                    
                    <h3>Other Uses of Quotation Marks</h3>
                    <div class="rule-section">
                        <h4>Special Terms</h4>
                        <ul>
                            <li><strong>Irony or emphasis:</strong> The "solution" created more problems</li>
                            <li><strong>Unfamiliar terms:</strong> This "blog" contains useful information</li>
                            <li><strong>Technical jargon:</strong> Users must "ping" the server</li>
                            <li><strong>Titles of articles:</strong> "Building Better Communities"</li>
                        </ul>
                    </div>
                    
                    <h3>Dialogue</h3>
                    <p>Each speaker's words begin a new paragraph:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Dialogue Format</h4>
                            <p>"What is the current status?" asked the director.<br><br>
                            "We're ahead of schedule," the manager replied.<br><br>
                            "Excellent. Please continue with the next phase."</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-quotation-marks"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('quotation-marks')">
                        Complete Section ‚Üí Nested Quotations
                    </button>
                </div>
            </section>

            <!-- Section 8.15: Nested Quotations -->
            <section class="content-section" id="nested-quotations">
                <div class="section-header">
                    <h2>8.15 Nested Quotations</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Quotes Within Quotes</h3>
                    <p>Use single quotation marks (' ') for quotations within quotations:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Nested Quotations</h4>
                            <p>The professor explained, "When Shakespeare wrote 'To be or not to be,' he was exploring existential questions."<br><br>
                            She said, "I remember the headline clearly: 'Government Announces New Policy.'"</p>
                        </div>
                    </div>
                    
                    <h3>Complex Nesting</h3>
                    <p>For quotes within quotes within quotes, alternate between double and single marks:</p>
                    
                    <div class="rule-section">
                        <h4>Pattern</h4>
                        <ul>
                            <li><strong>First level:</strong> "..." (double)</li>
                            <li><strong>Second level:</strong> '...' (single)</li>
                            <li><strong>Third level:</strong> "..." (double again)</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Complex Example</h4>
                            <p>The reporter wrote, "The witness testified, 'The suspect shouted "I didn't do it!" before running away.'"</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-nested-quotations"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('nested-quotations')">
                        Complete Section ‚Üí Block Quotations
                    </button>
                </div>
            </section>

            <!-- Section 8.20: Block Quotations -->
            <section class="content-section" id="block-quotations">
                <div class="section-header">
                    <h2>8.20 Block Quotations</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>When to Use Block Format</h3>
                    <p>Use block format for quotations longer than four lines of text:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Block Format</h4>
                            <p>The report concluded:</p>
                            <blockquote>
                                The evidence clearly demonstrates that current policies are inadequate to address the growing challenges in this sector. Immediate action is required to prevent further deterioration of services. The government must act decisively to implement the recommended changes within the next fiscal year.
                            </blockquote>
                        </div>
                    </div>
                    
                    <h3>Block Format Rules</h3>
                    <div class="rule-section">
                        <h4>Formatting Guidelines</h4>
                        <ul>
                            <li><strong>No quotation marks:</strong> The indentation shows it's a quotation</li>
                            <li><strong>Indent from left margin:</strong> Usually 1.25 cm or 5 spaces</li>
                            <li><strong>Single-space the quotation:</strong> Even if the main text is double-spaced</li>
                            <li><strong>Introduce with a colon:</strong> The minister stated:</li>
                            <li><strong>Citation follows:</strong> Place citation after the final period</li>
                        </ul>
                    </div>
                    
                    <h3>Poetry and Verse</h3>
                    <p>For poetry, preserve the original line breaks:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Poetry Format</h4>
                            <p>The national anthem begins:</p>
                            <blockquote>
                                O Canada! Our home and native land!<br>
                                True patriot love in all thy sons command.<br>
                                With glowing hearts we see thee rise,<br>
                                The True North strong and free!
                            </blockquote>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-block-quotations"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('block-quotations')">
                        Complete Section ‚Üí Omissions & Insertions
                    </button>
                </div>
            </section>

            <!-- Section 8.25: Omissions & Insertions -->
            <section class="content-section" id="omissions-insertions">
                <div class="section-header">
                    <h2>8.25 Omissions and Insertions</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Ellipses for Omissions</h3>
                    <p>Use three dots (...) to show where you've omitted text from a quotation:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Ellipses Usage</h4>
                            <p><strong>Original:</strong> "The policy will affect all departments, including finance, human resources, and operations, starting next month."<br><br>
                            <strong>With omission:</strong> "The policy will affect all departments ... starting next month."</p>
                        </div>
                    </div>
                    
                    <h3>Square Brackets for Insertions</h3>
                    <p>Use square brackets [ ] for your own words inserted into quotations:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Clarifications</h4>
                            <p>"We expect [the new policy] to be implemented by March."<br>
                            "The program [announced yesterday] will benefit many families."<br>
                            "This initiative [the housing project] requires additional funding."</p>
                        </div>
                    </div>
                    
                    <h3>Using [sic]</h3>
                    <p>Use [sic] to indicate errors in the original quotation:</p>
                    
                    <div class="rule-section">
                        <h4>Examples</h4>
                        <ul>
                            <li>"The goverment [sic] will respond soon."</li>
                            <li>"There was alot [sic] of confusion about the policy."</li>
                            <li>"The program will begin in Febuary [sic]."</li>
                        </ul>
                    </div>
                    
                    <h3>Capitalization Changes</h3>
                    <p>When you change the first letter of a quotation to fit your sentence structure, indicate this with brackets:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Capitalization Changes</h4>
                            <p><strong>Original:</strong> "the policy will be effective immediately."<br>
                            <strong>Incorporated:</strong> The minister announced that "[t]he policy will be effective immediately."</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-omissions-insertions"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('omissions-insertions')">
                        Complete Section ‚Üí Punctuation
                    </button>
                </div>
            </section>

            <!-- Section 8.30: Punctuation -->
            <section class="content-section" id="punctuation">
                <div class="section-header">
                    <h2>8.30 Punctuation with Quotations</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Canadian (Logical) Punctuation</h3>
                    <p>In Canada, place punctuation logically‚Äîinside quotation marks only if it's part of the quoted material:</p>
                    
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Canadian Style</h4>
                            <p>She said, "We will proceed with the plan."<br>
                            Did he say "urgent"?<br>
                            She called it "urgent".<br>
                            The report mentions "critical issues".</p>
                        </div>
                        <div class="example-card avoid">
                            <h4>‚ùå American Style</h4>
                            <p>She called it "urgent."<br>
                            The report mentions "critical issues."</p>
                        </div>
                    </div>
                    
                    <h3>Specific Rules</h3>
                    <div class="rule-section">
                        <h4>Periods and Commas</h4>
                        <ul>
                            <li><strong>Inside:</strong> When they end the quoted sentence</li>
                            <li><strong>Outside:</strong> When they're part of your sentence structure</li>
                        </ul>
                    </div>
                    
                    <div class="rule-section">
                        <h4>Question Marks and Exclamation Points</h4>
                        <ul>
                            <li><strong>Inside:</strong> When the quoted material is a question/exclamation</li>
                            <li><strong>Outside:</strong> When your sentence is the question/exclamation</li>
                        </ul>
                    </div>
                    
                    <h3>Examples in Context</h3>
                    <div class="examples-grid">
                        <div class="example-card good">
                            <h4>‚úÖ Various Punctuation</h4>
                            <ul>
                                <li><strong>Period inside:</strong> He said, "We're ready."</li>
                                <li><strong>Period outside:</strong> She mentioned "readiness".</li>
                                <li><strong>Question inside:</strong> "Are you ready?" she asked.</li>
                                <li><strong>Question outside:</strong> Did she say "ready"?</li>
                                <li><strong>Multiple quotes:</strong> "Yes", "no", and "maybe" are the options</li>
                                <li><strong>Ellipsis:</strong> "We should..." she began</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel -->
                <div class="quiz-panel" id="quiz-punctuation"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('punctuation')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. 
            Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch08';
        const sections = [
            { id: 'introduction', title: '8.01 Introduction' },
            { id: 'quotation-marks', title: '8.02 Quotation Marks' },
            { id: 'nested-quotations', title: '8.15 Nested Quotations' },
            { id: 'block-quotations', title: '8.20 Block Quotations' },
            { id: 'omissions-insertions', title: '8.25 Omissions & Insertions' },
            { id: 'punctuation', title: '8.30 Punctuation' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>üéâ Chapter 8 Complete!</h3>
                    <p>You've mastered quotations and quotation marks! 
                    Your writing will now properly incorporate and cite other people's words.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Section navigation
        function initSectionNavigation() {
            const tabs = document.querySelectorAll('.tab-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(tab);
                });
            });
            
            // Handle initial hash
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash)) {
                const tab = document.querySelector(`[data-section="${hash}"]`);
                if (tab) tab.click();
            } else {
                // Default to first section
                showSection('introduction');
                updateActiveTab(tabs[0]);
            }
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            activeLink.classList.add('active');
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/${CHAPTER_ID}-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 8');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>
