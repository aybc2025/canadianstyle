<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 5: Numerical Expressions - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 5
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">5</div>
                <div>
                    <h1>Numerical Expressions</h1>
                    <p>Clear and consistent presentation of numbers in your writing</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">5.01 Introduction</a>
                <a href="#round-numbers" class="tab-link" data-section="round-numbers">5.02 Round Numbers</a>
                <a href="#consistency" class="tab-link" data-section="consistency">5.03 Consistency</a>
                <a href="#initial" class="tab-link" data-section="initial">5.04 Beginning Sentences</a>
                <a href="#quantities" class="tab-link" data-section="quantities">5.05 Quantities</a>
                <a href="#money" class="tab-link" data-section="money">5.06 Money</a>
                <a href="#percentages" class="tab-link" data-section="percentages">5.07 Percentages</a>
                <a href="#time" class="tab-link" data-section="time">5.08 Time</a>
                <a href="#dates" class="tab-link" data-section="dates">5.09 Dates</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 5.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>5.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Clear presentation of numerical information improves document readability and professionalism. Consistency in how you express numbers helps readers focus on your content rather than being distracted by formatting variations.</p>
                    
                    <h3>Basic Principles</h3>
                    <ul>
                        <li><strong>Consistency:</strong> Use the same style throughout your document</li>
                        <li><strong>Context:</strong> Consider your audience and document type</li>
                        <li><strong>Clarity:</strong> Choose the format that's easiest to understand</li>
                    </ul>
                    
                    <div class="rule-box">
                        <h4>General Guidelines</h4>
                        <ul>
                            <li>Spell out numbers one to nine; use numerals for 10 and above</li>
                            <li>Always spell out numbers that begin sentences</li>
                            <li>Be consistent within categories (all ages, all percentages, etc.)</li>
                            <li>Use numerals in technical and scientific documents</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Complete Section → Round Numbers
                    </button>
                </div>
            </section>

            <!-- Section 5.02: Round Numbers -->
            <section class="content-section" id="round-numbers">
                <div class="section-header">
                    <h2>5.02 Round Numbers and Large Numbers</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Expressing Large Numbers</h3>
                    <p>Use a combination of numerals and words for large round numbers to improve readability:</p>
                    
                    <div class="examples-box">
                        <h4>Large Numbers</h4>
                        <div class="example-item good">
                            <p><strong>✓ Preferred for readability:</strong></p>
                            <ul>
                                <li>3 million (not 3,000,000)</li>
                                <li>45 billion (not 45,000,000,000)</li>
                                <li>2.5 million</li>
                                <li>$15 billion</li>
                            </ul>
                        </div>
                        <div class="example-item acceptable">
                            <p><strong>✓ Acceptable in financial contexts:</strong></p>
                            <ul>
                                <li>$3,000,000 (in budget documents)</li>
                                <li>45,000,000,000 (in statistical reports)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Comma Usage</h4>
                        <ul>
                            <li>Use commas in numbers of four digits or more: 1,000</li>
                            <li>No commas in years: 2024, not 2,024</li>
                            <li>No commas in postal codes, phone numbers, or page numbers</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-round-numbers"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('round-numbers')">
                        Complete Section → Consistency
                    </button>
                </div>
            </section>

            <!-- Section 5.03: Consistency -->
            <section class="content-section" id="consistency">
                <div class="section-header">
                    <h2>5.03 Consistency in Number Usage</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Maintaining Consistency</h3>
                    <p>When numbers appear in the same context, treat them consistently:</p>
                    
                    <div class="examples-box">
                        <h4>Consistent Series</h4>
                        <div class="example-item good">
                            <p><strong>✓ Consistent (all numerals because highest is 10+):</strong></p>
                            <ul>
                                <li>We received 3, 15, and 27 applications from the three regions.</li>
                                <li>The committee has 12, 8, and 15 members from each department.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Inconsistent (mixing styles):</strong></p>
                            <ul>
                                <li>We received three, 15, and 27 applications from the three regions.</li>
                                <li>The committee has 12, eight, and fifteen members from each department.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Category Consistency</h4>
                        <p>Be consistent within categories but not necessarily across different types:</p>
                        <ul>
                            <li><strong>Ages:</strong> All spelled out or all numerals</li>
                            <li><strong>Measurements:</strong> Usually numerals</li>
                            <li><strong>Money:</strong> Usually numerals with $ symbol</li>
                            <li><strong>Percentages:</strong> Usually numerals with % symbol</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-consistency"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('consistency')">
                        Complete Section → Beginning Sentences
                    </button>
                </div>
            </section>

            <!-- Section 5.04: Beginning Sentences -->
            <section class="content-section" id="initial">
                <div class="section-header">
                    <h2>5.04 Numbers at the Beginning of Sentences</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Sentence-Initial Numbers</h3>
                    <p>Always spell out numbers that begin sentences, regardless of your usual style:</p>
                    
                    <div class="examples-box">
                        <h4>Sentence Beginnings</h4>
                        <div class="example-item good">
                            <p><strong>✓ Correct:</strong></p>
                            <ul>
                                <li>Fifteen participants attended the workshop.</li>
                                <li>Two hundred and fifty applications were received.</li>
                                <li>Thirty-five percent of respondents agreed.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Incorrect:</strong></p>
                            <ul>
                                <li>15 participants attended the workshop.</li>
                                <li>250 applications were received.</li>
                                <li>35% of respondents agreed.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tip-box">
                        <h4>💡 Rewriting Options</h4>
                        <p>If spelling out creates awkward wording, consider rewriting:</p>
                        <ul>
                            <li><strong>Instead of:</strong> "One thousand two hundred and fifty-seven people attended..."</li>
                            <li><strong>Write:</strong> "The event attracted 1,257 attendees."</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-initial"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('initial')">
                        Complete Section → Quantities
                    </button>
                </div>
            </section>

            <!-- Section 5.05: Quantities -->
            <section class="content-section" id="quantities">
                <div class="section-header">
                    <h2>5.05 Quantities and Measurements</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Technical and Scientific Numbers</h3>
                    <p>Use numerals for quantities with units of measurement:</p>
                    
                    <div class="rule-box">
                        <h4>Always Use Numerals For</h4>
                        <ul>
                            <li><strong>Measurements:</strong> 5 metres, 10 kilometres, 3 litres</li>
                            <li><strong>Weights:</strong> 15 kilograms, 2.5 tonnes</li>
                            <li><strong>Temperatures:</strong> 25°C, -10°C</li>
                            <li><strong>Scientific data:</strong> 3.7 pH, 99.5% pure</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Measurements</h4>
                        <div class="example-item good">
                            <p><strong>✓ With units (use numerals):</strong></p>
                            <ul>
                                <li>The room is 5 metres by 8 metres.</li>
                                <li>Add 2 tablespoons of flour.</li>
                                <li>The building is 15 storeys high.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Without units (follow standard rules):</strong></p>
                            <ul>
                                <li>We need five more chairs. (not 5 more chairs)</li>
                                <li>Three options are available. (not 3 options)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-quantities"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('quantities')">
                        Complete Section → Money
                    </button>
                </div>
            </section>

            <!-- Section 5.06: Money -->
            <section class="content-section" id="money">
                <div class="section-header">
                    <h2>5.06 Money and Currency</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Currency Formatting</h3>
                    <p>Use consistent formats for monetary amounts:</p>
                    
                    <div class="rule-box">
                        <h4>Standard Formats</h4>
                        <ul>
                            <li><strong>Under $1:</strong> 75 cents or $0.75</li>
                            <li><strong>Whole dollars:</strong> $15 (not $15.00 in text)</li>
                            <li><strong>Mixed amounts:</strong> $15.75</li>
                            <li><strong>Large amounts:</strong> $2.5 million or $2,500,000</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Currency Examples</h4>
                        <div class="example-item good">
                            <p><strong>✓ Correct formats:</strong></p>
                            <ul>
                                <li>The budget increased by $1.2 million.</li>
                                <li>Coffee costs $3.50 per cup.</li>
                                <li>The program will cost $75,000 annually.</li>
                                <li>Admission is free (or costs nothing).</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Avoid:</strong></p>
                            <ul>
                                <li>The budget increased by $1,200,000.00.</li>
                                <li>Coffee costs $3.5 per cup.</li>
                                <li>Admission is $0.00.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tip-box">
                        <h4>💡 International Currency</h4>
                        <p>Specify currency when discussing international amounts: US$50 million, £25,000, €100</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-money"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('money')">
                        Complete Section → Percentages
                    </button>
                </div>
            </section>

            <!-- Section 5.07: Percentages -->
            <section class="content-section" id="percentages">
                <div class="section-header">
                    <h2>5.07 Percentages and Ratios</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Percentage Formats</h3>
                    <p>Use numerals with the percent symbol or spelled out "percent":</p>
                    
                    <div class="rule-box">
                        <h4>Standard Usage</h4>
                        <ul>
                            <li><strong>Scientific/technical:</strong> 25% (with symbol)</li>
                            <li><strong>Formal writing:</strong> 25 percent (spelled out)</li>
                            <li><strong>Beginning sentences:</strong> Twenty-five percent</li>
                            <li><strong>Casual references:</strong> Either format is acceptable</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Percentage Examples</h4>
                        <div class="example-item good">
                            <p><strong>✓ Correct usage:</strong></p>
                            <ul>
                                <li>Support increased by 15 percent.</li>
                                <li>The response rate was 67%.</li>
                                <li>Twenty-five percent of participants agreed.</li>
                                <li>Less than 1 percent responded.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Ratios and Proportions</h4>
                        <ul>
                            <li><strong>Ratios:</strong> 3:1 ratio, 5 to 1</li>
                            <li><strong>Fractions:</strong> one-half, two-thirds, 3/4</li>
                            <li><strong>Decimals:</strong> 0.5, 0.33, 0.75</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-percentages"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('percentages')">
                        Complete Section → Time
                    </button>
                </div>
            </section>

            <!-- Section 5.08: Time -->
            <section class="content-section" id="time">
                <div class="section-header">
                    <h2>5.08 Time Expressions</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Clock Time</h3>
                    <p>Use consistent formats for time expressions:</p>
                    
                    <div class="rule-box">
                        <h4>Time Formats</h4>
                        <ul>
                            <li><strong>On the hour:</strong> 3 p.m. (not 3:00 p.m.)</li>
                            <li><strong>With minutes:</strong> 3:30 p.m., 11:45 a.m.</li>
                            <li><strong>Noon and midnight:</strong> noon, midnight (not 12 p.m./a.m.)</li>
                            <li><strong>24-hour format:</strong> 15:30, 23:45 (military/technical contexts)</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Time Examples</h4>
                        <div class="example-item good">
                            <p><strong>✓ Correct:</strong></p>
                            <ul>
                                <li>The meeting starts at 2 p.m.</li>
                                <li>Office hours are 9 a.m. to 5 p.m.</li>
                                <li>Lunch is served from 11:30 a.m. to 1:30 p.m.</li>
                                <li>The deadline is noon on Friday.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Avoid:</strong></p>
                            <ul>
                                <li>The meeting starts at 2:00 p.m.</li>
                                <li>The deadline is 12 p.m. on Friday.</li>
                                <li>Office hours are 9 AM to 5 PM.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Duration and Age</h4>
                        <ul>
                            <li><strong>Duration:</strong> 2 hours, 30 minutes, 5 seconds</li>
                            <li><strong>Age:</strong> 25 years old, a 25-year-old person</li>
                            <li><strong>Periods:</strong> 1990s, 21st century</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-time"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('time')">
                        Complete Section → Dates
                    </button>
                </div>
            </section>

            <!-- Section 5.09: Dates -->
            <section class="content-section" id="dates">
                <div class="section-header">
                    <h2>5.09 Dates and Years</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Date Formats</h3>
                    <p>Use the international standard format for dates in government documents:</p>
                    
                    <div class="rule-box">
                        <h4>Canadian Government Standard</h4>
                        <ul>
                            <li><strong>Full dates:</strong> 2024-03-15 (ISO format) or March 15, 2024</li>
                            <li><strong>Month and year:</strong> March 2024</li>
                            <li><strong>Years only:</strong> 2024</li>
                            <li><strong>Approximate dates:</strong> early 2024, mid-March, late 1990s</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Date Examples</h4>
                        <div class="example-item good">
                            <p><strong>✓ Preferred formats:</strong></p>
                            <ul>
                                <li>The report was published on 2024-03-15.</li>
                                <li>The meeting is scheduled for March 15, 2024.</li>
                                <li>Applications are due by March 30.</li>
                                <li>The policy took effect in early 2024.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>✗ Avoid ambiguous formats:</strong></p>
                            <ul>
                                <li>03/15/24 (unclear which is month/day)</li>
                                <li>15/03/2024 (non-standard in North America)</li>
                                <li>March 15th, 2024 (unnecessary ordinal)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tip-box">
                        <h4>💡 Historical Dates</h4>
                        <p>For historical contexts, you may use traditional formats: "July 1, 1867" for Confederation, but be consistent within your document.</p>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Decades and Centuries</h4>
                        <ul>
                            <li><strong>Decades:</strong> 1990s, the nineties</li>
                            <li><strong>Centuries:</strong> 21st century, twentieth century</li>
                            <li><strong>Fiscal years:</strong> 2023-24 fiscal year</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-dates"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('dates')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch05';
        const sections = [
            { id: 'introduction', title: '5.01 Introduction' },
            { id: 'round-numbers', title: '5.02 Round Numbers' },
            { id: 'consistency', title: '5.03 Consistency' },
            { id: 'initial', title: '5.04 Beginning Sentences' },
            { id: 'quantities', title: '5.05 Quantities' },
            { id: 'money', title: '5.06 Money' },
            { id: 'percentages', title: '5.07 Percentages' },
            { id: 'time', title: '5.08 Time' },
            { id: 'dates', title: '5.09 Dates' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        // Section navigation
        function initSectionNavigation() {
            const tabs = document.querySelectorAll('.tab-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(tab);
                    window.location.hash = sectionId;
                });
            });
            
            // Handle initial hash
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash)) {
                const tab = document.querySelector(`[data-section="${hash}"]`);
                if (tab) {
                    showSection(hash);
                    updateActiveTab(tab);
                }
            } else {
                // Default to first section
                showSection('introduction');
                updateActiveTab(tabs[0]);
            }
        }
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>🎉 Chapter 5 Complete!</h3>
                    <p>Your documents will now present numbers clearly and consistently.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/ch05-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 5');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
    </script>
</body>
</html>
