<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Spelling - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 3
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">03</div>
                <div>
                    <h1>Spelling</h1>
                    <p>Master Canadian spelling conventions and avoid common errors</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">3.01 Introduction</a>
                <a href="#canadian-british" class="tab-link" data-section="canadian-british">Canadian vs British/US</a>
                <a href="#frequent-errors" class="tab-link" data-section="frequent-errors">3.03 Common Errors</a>
                <a href="#homonyms" class="tab-link" data-section="homonyms">3.05 Homonyms</a>
                <a href="#ei-ie" class="tab-link" data-section="ei-ie">3.06 EI and IE</a>
                <a href="#doubling" class="tab-link" data-section="doubling">3.09 Doubling Consonants</a>
                <a href="#endings" class="tab-link" data-section="endings">3.12-16 Word Endings</a>
                <a href="#plurals" class="tab-link" data-section="plurals">3.17 Plural Forms</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 3.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>3.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Canadian spelling is unique, blending British and American conventions. This chapter helps you navigate Canadian spelling preferences and avoid common errors.</p>
                    
                    <h3>Canadian Spelling Principles</h3>
                    <ul>
                        <li><strong>Hybrid system:</strong> Canadian spelling combines British and American elements</li>
                        <li><strong>Consistency:</strong> Choose one variant and use it throughout your document</li>
                        <li><strong>Authority:</strong> Consult current Canadian dictionaries</li>
                        <li><strong>Evolution:</strong> Canadian spelling continues to evolve</li>
                    </ul>
                    
                    <div class="example-box">
                        <div class="example-label">Key Principle</div>
                        <p>When in doubt, prefer the spelling most familiar to your Canadian audience. The Canadian Oxford Dictionary is an authoritative source.</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section: Canadian vs British/US -->
            <section class="content-section" id="canadian-british">
                <div class="section-header">
                    <h2>Canadian Spelling: British vs. American</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Canadian spelling typically follows these patterns:</p>
                    
                    <h3>Canadian Uses British Spelling</h3>
                    <div class="spelling-comparison">
                        <table>
                            <thead>
                                <tr>
                                    <th>Canadian/British</th>
                                    <th>American</th>
                                    <th>Examples</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>-our</td>
                                    <td>-or</td>
                                    <td>colour, honour, favour, labour</td>
                                </tr>
                                <tr>
                                    <td>-re</td>
                                    <td>-er</td>
                                    <td>centre, theatre, metre, fibre</td>
                                </tr>
                                <tr>
                                    <td>-ogue</td>
                                    <td>-og</td>
                                    <td>catalogue, dialogue, analogue</td>
                                </tr>
                                <tr>
                                    <td>double l</td>
                                    <td>single l</td>
                                    <td>travelled, modelling, cancelled</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <h3>Canadian Uses American Spelling</h3>
                    <div class="spelling-comparison">
                        <table>
                            <thead>
                                <tr>
                                    <th>Canadian/American</th>
                                    <th>British</th>
                                    <th>Examples</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>-ize</td>
                                    <td>-ise</td>
                                    <td>organize, recognize, realize</td>
                                </tr>
                                <tr>
                                    <td>-yze</td>
                                    <td>-yse</td>
                                    <td>analyze, paralyze</td>
                                </tr>
                                <tr>
                                    <td>tire</td>
                                    <td>tyre</td>
                                    <td>tire (on a car)</td>
                                </tr>
                                <tr>
                                    <td>curb</td>
                                    <td>kerb</td>
                                    <td>curb (edge of street)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="style-note">
                        <strong>Note:</strong> Some words like "defence/defense" are variable in Canadian usage. Choose one and be consistent.
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-canadian-british"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('canadian-british')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 3.03: Frequently Misspelled Words -->
            <section class="content-section" id="frequent-errors">
                <div class="section-header">
                    <h2>3.03 Frequently Misspelled Words</h2>
                </div>
                
                <div class="lesson-content">
                    <p>These words are commonly misspelled in business and government writing:</p>
                    
                    <div class="spelling-grid">
                        <div class="spelling-category">
                            <h4>Double Letters</h4>
                            <ul>
                                <li>accommodate (two c's, two m's)</li>
                                <li>committee (two m's, two t's)</li>
                                <li>occurrence (two c's, two r's)</li>
                                <li>embarrass (two r's, two s's)</li>
                                <li>millennium (two l's, two n's)</li>
                                <li>parallel (two l's)</li>
                                <li>successful (two c's, two s's)</li>
                            </ul>
                        </div>
                        
                        <div class="spelling-category">
                            <h4>Commonly Confused</h4>
                            <ul>
                                <li>definitely (not definately)</li>
                                <li>separate (not seperate)</li>
                                <li>necessary (one c, two s's)</li>
                                <li>privilege (not priviledge)</li>
                                <li>consensus (not concensus)</li>
                                <li>judgment/judgement (both OK)</li>
                                <li>independent (not independant)</li>
                            </ul>
                        </div>
                        
                        <div class="spelling-category">
                            <h4>Business Terms</h4>
                            <ul>
                                <li>liaison (not liason)</li>
                                <li>maintenance (not maintainance)</li>
                                <li>personnel (not personel)</li>
                                <li>questionnaire (two n's)</li>
                                <li>supersede (not supercede)</li>
                                <li>withhold (two h's)</li>
                                <li>acknowledgment (no e after g)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tech-tip">
                        <h4>💡 Memory Tips</h4>
                        <ul>
                            <li><strong>Necessary:</strong> One collar, two socks (one c, two s's)</li>
                            <li><strong>Stationery vs Stationary:</strong> E for envelope (paper), A for anchored (not moving)</li>
                            <li><strong>Principal vs Principle:</strong> PrincipAL is your pAL, principLE is a ruLE</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-frequent-errors"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('frequent-errors')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 3.05: Homonyms -->
            <section class="content-section" id="homonyms">
                <div class="section-header">
                    <h2>3.05 Homonyms and Similar-sounding Words</h2>
                </div>
                
                <div class="lesson-content">
                    <p>These words sound alike but have different meanings and spellings:</p>
                    
                    <div class="homonym-table">
                        <h3>Commonly Confused Pairs</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Word 1</th>
                                    <th>Meaning</th>
                                    <th>Word 2</th>
                                    <th>Meaning</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>accept</strong></td>
                                    <td>to receive</td>
                                    <td><strong>except</strong></td>
                                    <td>excluding</td>
                                </tr>
                                <tr>
                                    <td><strong>affect</strong></td>
                                    <td>to influence (verb)</td>
                                    <td><strong>effect</strong></td>
                                    <td>result (noun)</td>
                                </tr>
                                <tr>
                                    <td><strong>complement</strong></td>
                                    <td>to complete</td>
                                    <td><strong>compliment</strong></td>
                                    <td>praise</td>
                                </tr>
                                <tr>
                                    <td><strong>council</strong></td>
                                    <td>advisory group</td>
                                    <td><strong>counsel</strong></td>
                                    <td>advice</td>
                                </tr>
                                <tr>
                                    <td><strong>discreet</strong></td>
                                    <td>careful, subtle</td>
                                    <td><strong>discrete</strong></td>
                                    <td>separate, distinct</td>
                                </tr>
                                <tr>
                                    <td><strong>ensure</strong></td>
                                    <td>make certain</td>
                                    <td><strong>insure</strong></td>
                                    <td>protect with insurance</td>
                                </tr>
                                <tr>
                                    <td><strong>principal</strong></td>
                                    <td>main, chief</td>
                                    <td><strong>principle</strong></td>
                                    <td>rule, belief</td>
                                </tr>
                                <tr>
                                    <td><strong>stationary</strong></td>
                                    <td>not moving</td>
                                    <td><strong>stationery</strong></td>
                                    <td>writing paper</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="example-box">
                        <div class="example-label">Example 3.05</div>
                        <p>The <strong>principal</strong> reason for the change is to ensure our actions align with our <strong>principles</strong>.</p>
                        <p>Please <strong>accept</strong> this gift; everyone <strong>except</strong> John has already received one.</p>
                        <p>The new policy will <strong>affect</strong> everyone; its <strong>effect</strong> will be significant.</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-homonyms"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('homonyms')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 3.06: EI and IE -->
            <section class="content-section" id="ei-ie">
                <div class="section-header">
                    <h2>3.06 Words with EI and IE</h2>
                </div>
                
                <div class="lesson-content">
                    <p>The traditional rule "i before e except after c" has many exceptions. Here's a more complete guide:</p>
                    
                    <h3>IE Words (I before E)</h3>
                    <div class="spelling-columns">
                        <ul>
                            <li>achieve</li>
                            <li>believe</li>
                            <li>brief</li>
                            <li>chief</li>
                            <li>field</li>
                            <li>friend</li>
                            <li>grief</li>
                            <li>piece</li>
                            <li>relief</li>
                            <li>retrieve</li>
                            <li>shield</li>
                            <li>yield</li>
                        </ul>
                    </div>
                    
                    <h3>EI After C</h3>
                    <div class="spelling-columns">
                        <ul>
                            <li>ceiling</li>
                            <li>conceive</li>
                            <li>deceive</li>
                            <li>perceive</li>
                            <li>receipt</li>
                            <li>receive</li>
                        </ul>
                    </div>
                    
                    <h3>Exceptions: EI Not After C</h3>
                    <div class="spelling-columns">
                        <ul>
                            <li>beige</li>
                            <li>eight</li>
                            <li>either</li>
                            <li>foreign</li>
                            <li>height</li>
                            <li>leisure</li>
                            <li>neither</li>
                            <li>seize</li>
                            <li>their</li>
                            <li>weird</li>
                            <li>weight</li>
                        </ul>
                    </div>
                    
                    <div class="warning-box">
                        <h4>⚠️ Common Exceptions</h4>
                        <ul>
                            <li><strong>Science terms:</strong> protein, caffeine (ei pronounced as separate syllables)</li>
                            <li><strong>Plurals of -cy words:</strong> policies, agencies</li>
                            <li><strong>Words from other languages:</strong> sheikh, stein</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-ei-ie"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('ei-ie')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 3.17: Plural Forms -->
            <section class="content-section" id="plurals">
                <div class="section-header">
                    <h2>3.17 Plural Forms of Nouns</h2>
                </div>
                
                <div class="lesson-content">
                    <p>While most nouns simply add -s, many follow special rules:</p>
                    
                    <h3>Regular Plurals</h3>
                    <ul>
                        <li>Add <strong>-s</strong>: books, computers, reports</li>
                        <li>Add <strong>-es</strong> after s, x, z, ch, sh: boxes, churches, wishes</li>
                    </ul>
                    
                    <h3>Nouns Ending in -Y</h3>
                    <ul>
                        <li><strong>Consonant + y:</strong> Change to -ies (policy → policies, company → companies)</li>
                        <li><strong>Vowel + y:</strong> Just add -s (key → keys, attorney → attorneys)</li>
                    </ul>
                    
                    <h3>Nouns Ending in -O</h3>
                    <ul>
                        <li><strong>Add -es:</strong> heroes, potatoes, tomatoes, echoes</li>
                        <li><strong>Add -s only:</strong> photos, pianos, radios, studios</li>
                        <li><strong>Both accepted:</strong> zeros/zeroes, volcanos/volcanoes</li>
                    </ul>
                    
                    <h3>Nouns Ending in -F or -FE</h3>
                    <ul>
                        <li><strong>Change to -ves:</strong> half → halves, knife → knives, life → lives</li>
                        <li><strong>Just add -s:</strong> chief → chiefs, roof → roofs, proof → proofs</li>
                    </ul>
                    
                    <h3>Foreign Plurals (Latin/Greek Origin)</h3>
                    <div class="foreign-plurals">
                        <table>
                            <thead>
                                <tr>
                                    <th>Singular</th>
                                    <th>Plural</th>
                                    <th>Alternative</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>analysis</td>
                                    <td>analyses</td>
                                    <td>—</td>
                                </tr>
                                <tr>
                                    <td>appendix</td>
                                    <td>appendices</td>
                                    <td>appendixes</td>
                                </tr>
                                <tr>
                                    <td>basis</td>
                                    <td>bases</td>
                                    <td>—</td>
                                </tr>
                                <tr>
                                    <td>crisis</td>
                                    <td>crises</td>
                                    <td>—</td>
                                </tr>
                                <tr>
                                    <td>criterion</td>
                                    <td>criteria</td>
                                    <td>criterions</td>
                                </tr>
                                <tr>
                                    <td>datum</td>
                                    <td>data</td>
                                    <td>—</td>
                                </tr>
                                <tr>
                                    <td>index</td>
                                    <td>indices</td>
                                    <td>indexes</td>
                                </tr>
                                <tr>
                                    <td>phenomenon</td>
                                    <td>phenomena</td>
                                    <td>—</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <h3>Compound Nouns</h3>
                    <ul>
                        <li><strong>Main word takes plural:</strong> mothers-in-law, passersby, courts martial</li>
                        <li><strong>Last word if equal weight:</strong> secretary-treasurers</li>
                        <li><strong>Solid compounds:</strong> spoonfuls, handfuls (not spoonsful)</li>
                    </ul>
                </div>
                
                <div class="quiz-panel" id="quiz-plurals"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('plurals')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <style>
        /* Additional styles for Spelling chapter */
        .spelling-comparison table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--cs-space-l) 0;
        }
        
        .spelling-comparison th,
        .spelling-comparison td {
            padding: var(--cs-space-m);
            border: 1px solid var(--cs-grey-300);
            text-align: left;
        }
        
        .spelling-comparison th {
            background: var(--cs-red);
            color: var(--cs-white);
            font-weight: var(--cs-font-bold);
        }
        
        .spelling-comparison tr:hover {
            background: var(--cs-grey-100);
        }
        
        .spelling-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--cs-space-xl);
            margin: var(--cs-space-xl) 0;
        }
        
        .spelling-category {
            background: var(--cs-grey-100);
            padding: var(--cs-space-l);
            border-radius: 8px;
        }
        
        .spelling-category h4 {
            color: var(--cs-red);
            margin-bottom: var(--cs-space-m);
        }
        
        .spelling-category ul {
            list-style: none;
            padding: 0;
        }
        
        .spelling-category li {
            padding: var(--cs-space-xs) 0;
            font-size: 1.05rem;
        }
        
        .homonym-table table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--cs-space-l) 0;
        }
        
        .homonym-table th,
        .homonym-table td {
            padding: var(--cs-space-m);
            border: 1px solid var(--cs-grey-300);
        }
        
        .homonym-table th {
            background: var(--cs-grey-100);
            font-weight: var(--cs-font-bold);
        }
        
        .homonym-table td:nth-child(odd) {
            font-weight: var(--cs-font-bold);
        }
        
        .spelling-columns {
            column-count: 3;
            column-gap: var(--cs-space-xl);
            margin: var(--cs-space-l) 0;
        }
        
        .spelling-columns ul {
            list-style: none;
            padding: 0;
        }
        
        .spelling-columns li {
            padding: var(--cs-space-xs) 0;
            font-size: 1.05rem;
        }
        
        .foreign-plurals table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--cs-space-l) 0;
        }
        
        .foreign-plurals th,
        .foreign-plurals td {
            padding: var(--cs-space-m);
            border: 1px solid var(--cs-grey-300);
            text-align: left;
        }
        
        .foreign-plurals th {
            background: var(--cs-grey-100);
            font-weight: var(--cs-font-bold);
        }
        
        @media (max-width: 600px) {
            .spelling-columns {
                column-count: 1;
            }
        }
    </style>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine, loadQuizData } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch03';
        const sections = [
            { id: 'introduction', title: '3.01 Introduction' },
            { id: 'canadian-british', title: 'Canadian vs British/US' },
            { id: 'frequent-errors', title: '3.03 Common Errors' },
            { id: 'homonyms', title: '3.05 Homonyms' },
            { id: 'ei-ie', title: '3.06 EI and IE' },
            { id: 'doubling', title: '3.09 Doubling Consonants' },
            { id: 'endings', title: '3.12-16 Word Endings' },
            { id: 'plurals', title: '3.17 Plural Forms' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress();
            const chapterProgress = progress[CHAPTER_ID] || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                router.navigateTo(CHAPTER_ID, nextSection.id);
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-icon">✓</div>
                    <h2>Spelling Success!</h2>
                    <p>You've mastered Canadian spelling conventions.</p>
                    <div class="modal-stats">
                        <div class="stat">
                            <span class="stat-value">8</span>
                            <span class="stat-label">Sections Completed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">100%</span>
                            <span class="stat-label">Spelling Champion</span>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
                        <button class="btn btn-primary" onclick="window.location.href='ch04-capitalization.html'">
                            Next Chapter
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load quizzes
        async function loadSectionQuizzes() {
            const quizData = {
                'canadian-british': {
                    id: 'spelling-quiz',
                    title: 'Canadian Spelling',
                    chapterId: CHAPTER_ID,
                    sectionId: 'canadian-british',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which is the correct Canadian spelling?',
                            options: [
                                { label: 'color', correct: false },
                                { label: 'colour', correct: true },
                                { label: 'colur', correct: false },
                                { label: 'coulor', correct: false }
                            ],
                            rationale: 'Canadian spelling uses -our endings like British spelling.',
                            ref: '§3.01'
                        }
                    ]
                },
                homonyms: {
                    id: 'homonym-quiz',
                    title: 'Choose the Right Word',
                    chapterId: CHAPTER_ID,
                    sectionId: 'homonyms',
                    questions: [
                        {
                            type: 'fill-blank',
                            stem: 'The new policy will ___ everyone in the department.',
                            answer: 'affect',
                            rationale: 'Affect is the verb meaning to influence.',
                            ref: '§3.05'
                        }
                    ]
                }
            };
            
            // Initialize quizzes
            for (const section of sections) {
                const quiz = quizData[section.id];
                if (quiz) {
                    const container = document.getElementById(`quiz-${section.id}`);
                    if (container) {
                        const engine = new QuizEngine(`quiz-${section.id}`, quiz);
                        engine.init();
                    }
                }
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar();
            loadSectionQuizzes();
            
            if (!window.location.hash) {
                router.navigateTo(CHAPTER_ID, 'introduction');
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>