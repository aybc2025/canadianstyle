<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Punctuation - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <div class="chapter-container">
        <header class="chapter-header">
            <div class="breadcrumb">
                <a href="../index.html" class="breadcrumb-link">‚Üê Dashboard</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Chapter 7: Punctuation</span>
            </div>
            <div class="chapter-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="chapterProgress"></div>
                </div>
                <span class="progress-text">Progress</span>
            </div>
        </header>

        <nav class="chapter-nav">
            <div class="nav-links">
                <a href="#introduction" class="tab-link active" data-section="introduction">7.01 Introduction</a>
                <a href="#comma" class="tab-link" data-section="comma">7.05 Comma</a>
                <a href="#semicolon" class="tab-link" data-section="semicolon">7.35 Semicolon</a>
                <a href="#colon" class="tab-link" data-section="colon">7.42 Colon</a>
                <a href="#dashes" class="tab-link" data-section="dashes">7.51 Dashes</a>
                <a href="#parentheses" class="tab-link" data-section="parentheses">7.56 Parentheses</a>
                <a href="#apostrophe" class="tab-link" data-section="apostrophe">7.15 Apostrophe</a>
                <a href="#periods" class="tab-link" data-section="periods">7.16 Periods</a>
            </div>
        </nav>

        <main class="chapter-content">
            <!-- Introduction Section -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>7.01 Introduction to Punctuation</h2>
                </div>
                
                <div class="content-block">
                    <p>Punctuation marks are essential tools for clear communication. They show readers the structural relationships within and between sentences, making your writing easier to understand and more professional.</p>
                    
                    <div class="key-principles">
                        <h3>Canadian Punctuation Style</h3>
                        <ul>
                            <li>Generally lighter than British punctuation</li>
                            <li>Focus on clarity over tradition</li>
                            <li>Consistent application within documents</li>
                            <li>Reader-focused approach</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Functions of Punctuation</h4>
                            <ul>
                                <li><strong>Separate:</strong> ideas, clauses, items</li>
                                <li><strong>Connect:</strong> related thoughts</li>
                                <li><strong>Indicate:</strong> pauses, emphasis</li>
                                <li><strong>Clarify:</strong> meaning and structure</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Hierarchy of Separation</h4>
                            <ul>
                                <li><strong>Strongest:</strong> Period, question mark, exclamation</li>
                                <li><strong>Medium:</strong> Semicolon, colon</li>
                                <li><strong>Light:</strong> Comma</li>
                                <li><strong>Grouping:</strong> Parentheses, dashes</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Introduction -->
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Comma Section -->
            <section class="content-section" id="comma" style="display: none;">
                <div class="section-header">
                    <h2>7.05 Comma</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Essential Comma Rules</h4>
                        <p>Commas separate elements within sentences to prevent confusion and enhance readability.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Series (Oxford Comma)</h4>
                            <ul>
                                <li>Red, white, and blue</li>
                                <li>Departments, agencies, and Crown corporations</li>
                                <li>Planning, implementing, and evaluating</li>
                                <li>Monday, Tuesday, and Wednesday</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Before Coordinating Conjunctions</h4>
                            <ul>
                                <li>The report is complete, but it needs review</li>
                                <li>We can proceed now, or we can wait</li>
                                <li>The plan is solid, and the team agrees</li>
                                <li>She will attend, yet she has concerns</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Introductory Elements</h4>
                        <p>Use commas after introductory words, phrases, and clauses:</p>
                        <ul>
                            <li><strong>Words:</strong> However, the plan succeeded</li>
                            <li><strong>Phrases:</strong> In the meantime, we will wait</li>
                            <li><strong>Clauses:</strong> When the meeting ends, we'll decide</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Non-restrictive Clauses</h4>
                            <ul>
                                <li>The minister, <em>who arrived late</em>, spoke first</li>
                                <li>Ottawa, <em>which is the capital</em>, hosted the summit</li>
                                <li>The report, <em>published last month</em>, caused debate</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Restrictive Clauses (No Commas)</h4>
                            <ul>
                                <li>The minister <em>who arrived late</em> spoke first</li>
                                <li>The city <em>that hosted the summit</em> was Ottawa</li>
                                <li>Reports <em>published recently</em> are more reliable</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Other Comma Uses</h4>
                        <ul>
                            <li><strong>Appositives:</strong> John Smith, the director, will attend</li>
                            <li><strong>Direct address:</strong> Thank you, Minister, for coming</li>
                            <li><strong>Dates:</strong> January 15, 2025, was the deadline</li>
                            <li><strong>Addresses:</strong> Ottawa, Ontario, is the capital</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Quiz Panel for Comma -->
                <div class="quiz-panel" id="quiz-comma"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('comma')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Semicolon Section -->
            <section class="content-section" id="semicolon" style="display: none;">
                <div class="section-header">
                    <h2>7.35 Semicolon</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Semicolon Uses</h4>
                        <p>Semicolons join closely related independent clauses and separate complex items in lists.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Between Independent Clauses</h4>
                            <ul>
                                <li>The meeting ended; the decisions were final</li>
                                <li>Revenue increased this quarter; expenses remained stable</li>
                                <li>The policy is complex; however, it's necessary</li>
                                <li>We need more data; therefore, we'll postpone the decision</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Complex Series</h4>
                            <ul>
                                <li>Attendees included John Smith, Director; Mary Jones, Manager; and Bob Wilson, Analyst</li>
                                <li>The cities are Toronto, Ontario; Vancouver, British Columbia; and Montreal, Quebec</li>
                                <li>Meetings are scheduled for Monday, March 1; Wednesday, March 3; and Friday, March 5</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>With Transitional Expressions</h4>
                        <p>Use semicolons before transitional expressions connecting independent clauses:</p>
                        <ul>
                            <li><strong>however, therefore, consequently, nevertheless, furthermore, moreover</strong></li>
                            <li><strong>in addition, for example, in fact, on the other hand</strong></li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Correct Examples</h4>
                            <ul>
                                <li>The budget is tight; however, we can manage</li>
                                <li>Sales increased; therefore, bonuses will be paid</li>
                                <li>The plan is ambitious; nevertheless, it's achievable</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Avoid These</h4>
                            <ul>
                                <li>‚ùå The budget is tight, however, we can manage</li>
                                <li>‚ùå Sales increased, therefore bonuses will be paid</li>
                                <li>‚ùå The plan is ambitious; But it's achievable</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Semicolon -->
                <div class="quiz-panel" id="quiz-semicolon"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('semicolon')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Colon Section -->
            <section class="content-section" id="colon" style="display: none;">
                <div class="section-header">
                    <h2>7.42 Colon</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Colon Functions</h4>
                        <p>Colons introduce lists, explanations, quotations, and examples. They signal "what follows."</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Introducing Lists</h4>
                            <ul>
                                <li>Three departments attended: Justice, Finance, and Health</li>
                                <li>The agenda includes: budget review, staff updates, and planning</li>
                                <li>Requirements are as follows: application form, two references, and transcript</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Explanations and Examples</h4>
                            <ul>
                                <li>The result was predictable: costs increased</li>
                                <li>One thing is certain: we need more time</li>
                                <li>Here's the problem: insufficient funding</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Before Quotations</h4>
                        <p>Use colons to introduce formal quotations, especially long ones:</p>
                        <ul>
                            <li>The minister stated: "This policy will benefit all Canadians."</li>
                            <li>The report concluded: "Immediate action is required."</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Time and Ratios</h4>
                            <ul>
                                <li><strong>Time:</strong> 9:30 a.m., 14:00</li>
                                <li><strong>Ratios:</strong> 3:1, 10:1</li>
                                <li><strong>Biblical references:</strong> John 3:16</li>
                                <li><strong>Volume/issue:</strong> Vol. 15:2</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Capitalization After Colons</h4>
                            <ul>
                                <li><strong>Complete sentence:</strong> Remember this: Time is valuable</li>
                                <li><strong>Fragment:</strong> Remember this: the deadline</li>
                                <li><strong>List items:</strong> usually lowercase</li>
                                <li><strong>Quotations:</strong> capitalize first word</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>When NOT to Use Colons</h4>
                        <ul>
                            <li>‚ùå The departments are: Justice, Finance, and Health</li>
                            <li>‚úÖ The departments are Justice, Finance, and Health</li>
                            <li>‚ùå This includes: planning and implementation</li>
                            <li>‚úÖ This includes planning and implementation</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Quiz Panel for Colon -->
                <div class="quiz-panel" id="quiz-colon"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('colon')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Dashes Section -->
            <section class="content-section" id="dashes" style="display: none;">
                <div class="section-header">
                    <h2>7.51 Dashes</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Types of Dashes</h4>
                        <p>Use em dashes (‚Äî) for breaks in thought and en dashes (‚Äì) for ranges and connections.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Em Dashes (‚Äî)</h4>
                            <ul>
                                <li><strong>Sudden break:</strong> The meeting was‚Äîsurprisingly‚Äîproductive</li>
                                <li><strong>Emphasis:</strong> We have one goal‚Äîsuccess</li>
                                <li><strong>Interruption:</strong> "I think we should‚Äî" "No, wait!"</li>
                                <li><strong>Summary:</strong> Planning, implementing, evaluating‚Äîthese are our priorities</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>En Dashes (‚Äì)</h4>
                            <ul>
                                <li><strong>Ranges:</strong> pages 15‚Äì20, 2020‚Äì2025</li>
                                <li><strong>Connections:</strong> Ottawa‚ÄìToronto flight</li>
                                <li><strong>Scores:</strong> 3‚Äì1 victory</li>
                                <li><strong>Compound adjectives:</strong> post‚ÄìWorld War II era</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Em Dash vs. Other Punctuation</h4>
                        <ul>
                            <li><strong>Instead of commas:</strong> for stronger emphasis</li>
                            <li><strong>Instead of parentheses:</strong> for more prominence</li>
                            <li><strong>Instead of colons:</strong> for less formality</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Spacing</h4>
                            <ul>
                                <li><strong>Em dash:</strong> no spaces‚Äîlike this</li>
                                <li><strong>En dash:</strong> no spaces for ranges 9‚Äì5</li>
                                <li><strong>En dash:</strong> spaces for compound terms post ‚Äì World War II</li>
                                <li><strong>Hyphen:</strong> no spaces in compound words</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Common Uses</h4>
                            <ul>
                                <li>The solution is simple‚Äîwork together</li>
                                <li>Three qualities matter‚Äîskill, effort, teamwork</li>
                                <li>The period 2020‚Äì2025 was challenging</li>
                                <li>A Toronto‚ÄìMontreal comparison</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Dashes -->
                <div class="quiz-panel" id="quiz-dashes"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('dashes')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Parentheses Section -->
            <section class="content-section" id="parentheses" style="display: none;">
                <div class="section-header">
                    <h2>7.56 Parentheses</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Parentheses Uses</h4>
                        <p>Parentheses enclose supplementary information that could be omitted without affecting the main message.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Explanatory Information</h4>
                            <ul>
                                <li>The CEO (chief executive officer) attended</li>
                                <li>Revenue increased by $2 million (15%)</li>
                                <li>The conference (held annually since 1995) was successful</li>
                                <li>Ottawa (population 1 million) is the capital</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>References and Citations</h4>
                            <ul>
                                <li>Smith argues this point (see page 45)</li>
                                <li>The data supports this conclusion (Table 3)</li>
                                <li>Statistics Canada reports (2024) show growth</li>
                                <li>Legal precedent exists (R. v. Jones, 2020)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Punctuation with Parentheses</h4>
                        <ul>
                            <li><strong>Period inside:</strong> when sentence is entirely parenthetical</li>
                            <li><strong>Period outside:</strong> when parentheses are within a sentence</li>
                            <li><strong>Other marks:</strong> generally outside parentheses</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Punctuation Examples</h4>
                            <ul>
                                <li>Revenue increased (by 15%).</li>
                                <li>Revenue increased by 15%. (This was expected.)</li>
                                <li>Did revenue increase (by how much)?</li>
                                <li>Revenue increased by 15%! (Amazing results!)</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Numbered Lists</h4>
                            <ul>
                                <li>Steps include (1) planning, (2) implementing, and (3) evaluating</li>
                                <li>Requirements are (a) application, (b) references, and (c) transcript</li>
                                <li>Options include (i) postpone, (ii) modify, or (iii) cancel</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Parentheses -->
                <div class="quiz-panel" id="quiz-parentheses"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('parentheses')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Apostrophe Section -->
            <section class="content-section" id="apostrophe" style="display: none;">
                <div class="section-header">
                    <h2>7.15 Apostrophe</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Apostrophe Functions</h4>
                        <p>Apostrophes show possession and mark contractions. They do NOT make words plural.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Possession</h4>
                            <ul>
                                <li><strong>Singular:</strong> the minister's office</li>
                                <li><strong>Plural ending in s:</strong> the ministers' meeting</li>
                                <li><strong>Plural not ending in s:</strong> the children's program</li>
                                <li><strong>Compound:</strong> my sister-in-law's car</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Special Cases</h4>
                            <ul>
                                <li><strong>Names ending in s:</strong> James's book or James' book</li>
                                <li><strong>Organizations:</strong> McDonald's, Tim Hortons</li>
                                <li><strong>Time expressions:</strong> a day's work, two weeks' vacation</li>
                                <li><strong>Joint possession:</strong> Smith and Jones's report</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Contractions</h4>
                        <p>Apostrophes mark omitted letters in contractions:</p>
                        <ul>
                            <li><strong>can't</strong> (cannot), <strong>won't</strong> (will not)</li>
                            <li><strong>it's</strong> (it is), <strong>they're</strong> (they are)</li>
                            <li><strong>'90s</strong> (1990s), <strong>o'clock</strong> (of the clock)</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Common Errors to Avoid</h4>
                            <ul>
                                <li>‚ùå <strong>it's</strong> vs. <strong>its</strong> confusion</li>
                                <li>‚ùå <strong>your</strong> vs. <strong>you're</strong> confusion</li>
                                <li>‚ùå Plural apostrophes: menu's, photo's</li>
                                <li>‚ùå Possessive pronouns: her's, our's</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Correct Forms</h4>
                            <ul>
                                <li>‚úÖ <strong>its</strong> (possessive), <strong>it's</strong> (it is)</li>
                                <li>‚úÖ <strong>your</strong> (possessive), <strong>you're</strong> (you are)</li>
                                <li>‚úÖ <strong>menus, photos</strong> (plurals)</li>
                                <li>‚úÖ <strong>hers, ours, theirs</strong> (possessive pronouns)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Special Uses</h4>
                        <ul>
                            <li><strong>Letters/numbers:</strong> Mind your p's and q's, the 1990's</li>
                            <li><strong>Abbreviations:</strong> CD's (when plural unclear)</li>
                            <li><strong>Words as words:</strong> too many and's in the sentence</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Quiz Panel for Apostrophe -->
                <div class="quiz-panel" id="quiz-apostrophe"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('apostrophe')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Periods Section -->
            <section class="content-section" id="periods" style="display: none;">
                <div class="section-header">
                    <h2>7.16 Periods</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Period Uses</h4>
                        <p>Periods end sentences and mark most abbreviations. Use them consistently and appropriately.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>End of Sentences</h4>
                            <ul>
                                <li>The meeting ends at 3 p.m.</li>
                                <li>Please submit your report by Friday.</li>
                                <li>Revenue increased by 15 per cent.</li>
                                <li>The minister will make an announcement.</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Abbreviations</h4>
                            <ul>
                                <li><strong>With periods:</strong> Mr., Dr., etc., i.e.</li>
                                <li><strong>Without periods:</strong> UN, NATO, CEO, DVD</li>
                                <li><strong>Metric units:</strong> km, kg, cm (no periods)</li>
                                <li><strong>Academic degrees:</strong> B.A., Ph.D., M.A.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Spacing After Periods</h4>
                        <p>Use <strong>one space</strong> after periods in running text (not two).</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Decimal Points</h4>
                            <ul>
                                <li>$15.99, 3.5 per cent</li>
                                <li>98.6¬∞F, 2.54 cm</li>
                                <li>Version 2.1, Chapter 3.5</li>
                                <li>GPS coordinates: 45.4215¬∞N</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Lists and Outlines</h4>
                            <ul>
                                <li>1. First item</li>
                                <li>2. Second item</li>
                                <li>a. Sub-item</li>
                                <li>b. Another sub-item</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Ellipsis (Three Periods)</h4>
                        <ul>
                            <li><strong>Omitted text:</strong> "The minister said... we will proceed"</li>
                            <li><strong>Trailing off:</strong> "I think we should..."</li>
                            <li><strong>Spacing:</strong> space before and after (...)</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Quiz Panel for Periods -->
                <div class="quiz-panel" id="quiz-periods"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('periods')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Include JavaScript modules -->
    <script type="module" src="../shared/js/router.js"></script>
    <script type="module" src="../shared/js/quiz-engine.js"></script>
    <script type="module" src="../shared/js/progress.js"></script>
    <script type="module" src="../shared/js/components.js"></script>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getChapterProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        
        const CHAPTER_ID = 'ch07';
        const sections = [
            { id: 'introduction', title: '7.01 Introduction' },
            { id: 'comma', title: '7.05 Comma' },
            { id: 'semicolon', title: '7.35 Semicolon' },
            { id: 'colon', title: '7.42 Colon' },
            { id: 'dashes', title: '7.51 Dashes' },
            { id: 'parentheses', title: '7.56 Parentheses' },
            { id: 'apostrophe', title: '7.15 Apostrophe' },
            { id: 'periods', title: '7.16 Periods' }
        ];
        
        // Initialize router
        router.init(CHAPTER_ID, sections);
        
        // Update progress bar using correct API
        function updateProgressBar() {
            const chapterProgress = getChapterProgress(CHAPTER_ID);
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            const progressBar = document.getElementById('chapterProgress');
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                router.navigateTo(CHAPTER_ID, nextSection.id);
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>üéâ Chapter 7 Complete!</h3>
                    <p>You've mastered punctuation rules. Ready for the next chapter?</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes - FIXED VERSION
        async function loadSectionQuizzes() {
            // Sample quiz data - in real implementation, this would come from JSON files
            const quizData = {
                introduction: {
                    title: 'Introduction to Punctuation',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'What is the primary purpose of punctuation?',
                            options: [
                                { label: 'To make writing look professional', correct: false },
                                { label: 'To help readers understand structural relationships', correct: true },
                                { label: 'To follow grammar rules', correct: false },
                                { label: 'To separate words', correct: false }
                            ],
                            rationale: 'Punctuation primarily helps readers understand the structural relationship within and between sentences.',
                            ref: '¬ß7.01'
                        }
                    ]
                },
                comma: {
                    title: 'Comma Rules',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which sentence correctly uses the Oxford comma?',
                            options: [
                                { label: 'Red, white and blue', correct: false },
                                { label: 'Red, white, and blue', correct: true },
                                { label: 'Red white and blue', correct: false },
                                { label: 'Red; white; and blue', correct: false }
                            ],
                            rationale: 'Canadian style uses the Oxford comma: Red, white, and blue.',
                            ref: '¬ß7.05'
                        }
                    ]
                },
                semicolon: {
                    title: 'Semicolon Usage',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which sentence correctly uses a semicolon?',
                            options: [
                                { label: 'The meeting ended, the decisions were final', correct: false },
                                { label: 'The meeting ended; the decisions were final', correct: true },
                                { label: 'The meeting ended: the decisions were final', correct: false },
                                { label: 'The meeting ended‚Äîthe decisions were final', correct: false }
                            ],
                            rationale: 'Semicolons join closely related independent clauses.',
                            ref: '¬ß7.35'
                        }
                    ]
                },
                colon: {
                    title: 'Colon Rules',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'When should you NOT use a colon?',
                            options: [
                                { label: 'Before a list after "including"', correct: true },
                                { label: 'To introduce a quotation', correct: false },
                                { label: 'Before an explanation', correct: false },
                                { label: 'In time expressions', correct: false }
                            ],
                            rationale: 'Don\'t use colons after prepositions like "including" or verbs like "are".',
                            ref: '¬ß7.42'
                        }
                    ]
                },
                dashes: {
                    title: 'Dashes',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which dash is used for date ranges?',
                            options: [
                                { label: 'Hyphen (-)', correct: false },
                                { label: 'En dash (‚Äì)', correct: true },
                                { label: 'Em dash (‚Äî)', correct: false },
                                { label: 'Any dash works', correct: false }
                            ],
                            rationale: 'En dashes are used for ranges like 2020‚Äì2025.',
                            ref: '¬ß7.51'
                        }
                    ]
                },
                parentheses: {
                    title: 'Parentheses',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Where does the period go in: "Revenue increased (by 15%)"?',
                            options: [
                                { label: 'Inside: (by 15%.)', correct: false },
                                { label: 'Outside: (by 15%).', correct: true },
                                { label: 'Both places', correct: false },
                                { label: 'No period needed', correct: false }
                            ],
                            rationale: 'When parentheses are within a sentence, the period goes outside.',
                            ref: '¬ß7.56'
                        }
                    ]
                },
                apostrophe: {
                    title: 'Apostrophes',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which is correct?',
                            options: [
                                { label: 'The dog wagged it\'s tail', correct: false },
                                { label: 'The dog wagged its tail', correct: true },
                                { label: 'The dog wagged its\' tail', correct: false },
                                { label: 'The dog wagged its tail\'', correct: false }
                            ],
                            rationale: '"Its" is possessive; "it\'s" means "it is".',
                            ref: '¬ß7.15'
                        }
                    ]
                },
                periods: {
                    title: 'Periods',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'How many spaces follow a period in running text?',
                            options: [
                                { label: 'No spaces', correct: false },
                                { label: 'One space', correct: true },
                                { label: 'Two spaces', correct: false },
                                { label: 'Depends on the context', correct: false }
                            ],
                            rationale: 'Modern style uses one space after periods in running text.',
                            ref: '¬ß7.16'
                        }
                    ]
                }
            };
            
            // Initialize quizzes using FIXED API
            for (const section of sections) {
                const quiz = quizData[section.id];
                if (quiz) {
                    const container = document.getElementById(`quiz-${section.id}`);
                    if (container) {
                        // FIXED: Use correct constructor parameters
                        const engine = new QuizEngine(quiz, CHAPTER_ID, section.id);
                        const quizElement = engine.render();
                        container.appendChild(quizElement);
                    }
                }
            }
        }
        
        // Initialize navigation
        function initializeNavigation() {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                    updateActiveTab(link);
                });
            });
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            activeLink.classList.add('active');
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar();
            loadSectionQuizzes();
            initializeNavigation();
            
            if (!window.location.hash) {
                router.navigateTo(CHAPTER_ID, 'introduction');
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>
