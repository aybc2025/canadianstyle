<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Punctuation - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <!-- Chapter Hero Section -->
    <header class="chapter-hero">
        <div class="container">
            <div class="breadcrumb">
                <a href="../index.html">← Back to Dashboard</a>
            </div>
            
            <div class="chapter-meta">
                <div class="chapter-icon">07</div>
                <div class="chapter-info">
                    <h1>Punctuation</h1>
                    <p>Master punctuation rules for clear, effective writing</p>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgressFill"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Section Navigation -->
        <nav class="section-nav">
            <a href="#introduction" class="section-tab active">Introduction</a>
            <a href="#comma" class="section-tab">Comma</a>
            <a href="#semicolon" class="section-tab">Semicolon</a>
            <a href="#colon" class="section-tab">Colon</a>
            <a href="#dashes" class="section-tab">Dashes</a>
            <a href="#parentheses" class="section-tab">Parentheses</a>
            <a href="#apostrophe" class="section-tab">Apostrophe</a>
            <a href="#periods" class="section-tab">Periods</a>
        </nav>

        <!-- Introduction Section -->
        <section id="introduction" class="content-section active">
            <div class="section-header">
                <h2>7.01 Introduction</h2>
            </div>
            
            <div class="lesson-content">
                <p>Punctuation helps readers understand the structural relationship within and between sentences. Canadian style generally favours lighter punctuation than British style.</p>
                
                <div class="key-principle">
                    <h3>Golden Rule</h3>
                    <p><strong>Use only the punctuation necessary for clarity.</strong> Avoid over-punctuating, but don't sacrifice readability.</p>
                </div>
                
                <h3>Functions of Punctuation</h3>
                <ul>
                    <li><strong>Terminating:</strong> period, question mark, exclamation mark</li>
                    <li><strong>Separating:</strong> comma, semicolon, colon</li>
                    <li><strong>Enclosing:</strong> quotation marks, parentheses, brackets, dashes</li>
                    <li><strong>Indicating omission:</strong> apostrophe, ellipsis</li>
                </ul>
            </div>
            
            <!-- Quiz Panel for Introduction -->
            <div class="quiz-panel" id="quiz-introduction"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('introduction')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Comma Section -->
        <section id="comma" class="content-section">
            <div class="section-header">
                <h2>7.05 The Comma</h2>
            </div>
            
            <div class="lesson-content">
                <p>The comma is the most frequently used punctuation mark. It indicates the shortest pause in reading.</p>
                
                <h3>7.14 Restrictive and Non-restrictive Elements</h3>
                <div class="rule-box">
                    <h4>Key Rule</h4>
                    <p><strong>Restrictive</strong> (essential) elements: no commas<br>
                    <strong>Non-restrictive</strong> (additional) elements: use commas</p>
                </div>
                
                <div class="examples-box">
                    <h4>Examples</h4>
                    <div class="example-pair">
                        <div class="example">
                            <strong>Restrictive:</strong> The students who studied hard passed the exam.
                            <small>(Specifies which students)</small>
                        </div>
                        <div class="example">
                            <strong>Non-restrictive:</strong> The students, who had studied hard, passed the exam.
                            <small>(Additional information about all students)</small>
                        </div>
                    </div>
                </div>
                
                <h3>7.05 Oxford Comma (Serial Comma)</h3>
                <div class="rule-box">
                    <h4>Canadian Style Preference</h4>
                    <p>Omit the final comma in a series <strong>unless needed for clarity</strong>.</p>
                </div>
                
                <div class="examples-box">
                    <h4>Examples</h4>
                    <div class="example">
                        <strong>Standard:</strong> We ordered pizza, salad and drinks.
                    </div>
                    <div class="example">
                        <strong>For clarity:</strong> I'd like to thank my parents, Ayn Rand, and God.
                        <small>(Without the comma: "my parents Ayn Rand and God" suggests Ayn Rand and God are the parents)</small>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Panel for Comma -->
            <div class="quiz-panel" id="quiz-comma"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('comma')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Semicolon Section -->
        <section id="semicolon" class="content-section">
            <div class="section-header">
                <h2>7.35 The Semicolon</h2>
            </div>
            
            <div class="lesson-content">
                <p>The semicolon indicates a pause longer than a comma but shorter than a period.</p>
                
                <h3>Primary Uses</h3>
                <ol>
                    <li><strong>Between independent clauses:</strong> The meeting ended late; everyone was exhausted.</li>
                    <li><strong>In complex lists:</strong> Attendees came from Vancouver, BC; Toronto, ON; and Halifax, NS.</li>
                    <li><strong>Before conjunctive adverbs:</strong> The proposal was well-received; however, funding remains uncertain.</li>
                </ol>
                
                <div class="rule-box">
                    <h4>Quick Test</h4>
                    <p>If you can replace the semicolon with a period and have two complete sentences, you're using it correctly.</p>
                </div>
            </div>
            
            <!-- Quiz Panel for Semicolon -->
            <div class="quiz-panel" id="quiz-semicolon"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('semicolon')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Colon Section -->
        <section id="colon" class="content-section">
            <div class="section-header">
                <h2>7.42 The Colon</h2>
            </div>
            
            <div class="lesson-content">
                <p>The colon introduces and directs attention to what follows.</p>
                
                <h3>Main Uses</h3>
                <ul>
                    <li><strong>Lists:</strong> Three items are required: pen, paper, and calculator.</li>
                    <li><strong>Explanations:</strong> Here's the problem: insufficient funding.</li>
                    <li><strong>Quotations:</strong> The minister stated: "No new taxes this year."</li>
                    <li><strong>Time:</strong> 2:30 p.m.</li>
                    <li><strong>Ratios:</strong> 3:1 majority</li>
                </ul>
                
                <div class="rule-box">
                    <h4>Capitalization After Colons</h4>
                    <p>Capitalize the first word after a colon if it begins a complete sentence or formal statement.</p>
                </div>
            </div>
            
            <!-- Quiz Panel for Colon -->
            <div class="quiz-panel" id="quiz-colon"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('colon')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Dashes Section -->
        <section id="dashes" class="content-section">
            <div class="section-header">
                <h2>7.51 Dashes</h2>
            </div>
            
            <div class="lesson-content">
                <p>Use em dashes (—) for parenthetical elements and interruptions in dialogue. Dashes are less formal than parentheses but more emphatic than commas.</p>
                
                <div class="dash-comparison">
                    <h3>Formality Scale</h3>
                    <div class="formality-scale">
                        <div class="scale-item formal">
                            <strong>Most Formal:</strong> Parentheses ( )
                        </div>
                        <div class="scale-item">
                            <strong>Neutral:</strong> Commas ,
                        </div>
                        <div class="scale-item informal">
                            <strong>Least Formal:</strong> Em dashes —
                        </div>
                    </div>
                </div>
                
                <h3>Usage Examples</h3>
                <div class="examples-box">
                    <div class="example">
                        <strong>Parenthetical:</strong> The report—which took months to prepare—was well received.
                    </div>
                    <div class="example">
                        <strong>Emphasis:</strong> Only one person can solve this problem—you.
                    </div>
                    <div class="example">
                        <strong>Interrupted dialogue:</strong> "I think we should—" "No, absolutely not."
                    </div>
                </div>
                
                <div class="rule-box">
                    <h4>Typing Dashes</h4>
                    <p><strong>Em dash (—):</strong> Two hyphens (--) or Alt+0151<br>
                    <strong>En dash (–):</strong> For ranges: pages 15–30, 1995–2000</p>
                </div>
            </div>
            
            <!-- Quiz Panel for Dashes -->
            <div class="quiz-panel" id="quiz-dashes"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('dashes')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Parentheses Section -->
        <section id="parentheses" class="content-section">
            <div class="section-header">
                <h2>7.56 Parentheses</h2>
            </div>
            
            <div class="lesson-content">
                <p>Parentheses enclose supplementary information that could be omitted without changing the sentence's meaning.</p>
                
                <h3>Common Uses</h3>
                <ul>
                    <li><strong>Additional information:</strong> The conference (held in Vancouver) was successful.</li>
                    <li><strong>Acronym definitions:</strong> The Canada Revenue Agency (CRA) announced new rules.</li>
                    <li><strong>References:</strong> See Chapter 5 (pages 45–67) for details.</li>
                    <li><strong>Optional elements:</strong> Bring your laptop(s) to the meeting.</li>
                </ul>
                
                <div class="rule-box">
                    <h4>Punctuation with Parentheses</h4>
                    <p>Place punctuation outside parentheses unless the entire sentence is in parentheses.</p>
                </div>
                
                <div class="examples-box">
                    <h4>Examples</h4>
                    <div class="example">
                        <strong>Correct:</strong> The meeting ended early (3:00 p.m.).
                    </div>
                    <div class="example">
                        <strong>Correct:</strong> (The meeting had been scheduled for 4:00 p.m.)
                    </div>
                </div>
            </div>
            
            <!-- Quiz Panel for Parentheses -->
            <div class="quiz-panel" id="quiz-parentheses"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('parentheses')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Apostrophe Section -->
        <section id="apostrophe" class="content-section">
            <div class="section-header">
                <h2>7.15 The Apostrophe</h2>
            </div>
            
            <div class="lesson-content">
                <p>The apostrophe indicates possession and contractions.</p>
                
                <h3>Possession Rules</h3>
                <div class="rules-grid">
                    <div class="rule-item">
                        <h4>Singular nouns</h4>
                        <p>Add 's: <em>cat's toy, James's book</em></p>
                    </div>
                    <div class="rule-item">
                        <h4>Plural ending in s</h4>
                        <p>Add ' only: <em>cats' toys, students' books</em></p>
                    </div>
                    <div class="rule-item">
                        <h4>Plural not ending in s</h4>
                        <p>Add 's: <em>children's toys, women's rights</em></p>
                    </div>
                    <div class="rule-item">
                        <h4>Names ending in s</h4>
                        <p>Add 's: <em>Jones's house</em> (Canadian preference)</p>
                    </div>
                </div>
                
                <h3>Common Errors to Avoid</h3>
                <div class="error-examples">
                    <div class="error-item">
                        <span class="wrong">❌ Its' time to go</span>
                        <span class="right">✅ It's time to go (contraction)</span>
                    </div>
                    <div class="error-item">
                        <span class="wrong">❌ The dog wagged it's tail</span>
                        <span class="right">✅ The dog wagged its tail (possessive)</span>
                    </div>
                    <div class="error-item">
                        <span class="wrong">❌ Apple's for sale</span>
                        <span class="right">✅ Apples for sale (simple plural)</span>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Panel for Apostrophe -->
            <div class="quiz-panel" id="quiz-apostrophe"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('apostrophe')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>

        <!-- Periods Section -->
        <section id="periods" class="content-section">
            <div class="section-header">
                <h2>7.16 Periods</h2>
            </div>
            
            <div class="lesson-content">
                <p>Periods end complete sentences and are used in many abbreviations.</p>
                
                <h3>Basic Uses</h3>
                <ul>
                    <li><strong>End statements:</strong> The meeting will begin at 2 p.m.</li>
                    <li><strong>Indirect questions:</strong> She asked when the meeting would begin.</li>
                    <li><strong>Abbreviations:</strong> Dr., Mr., Inc., etc.</li>
                </ul>
                
                <h3>Canadian Preferences</h3>
                <div class="preference-box">
                    <h4>Abbreviations</h4>
                    <ul>
                        <li><strong>With periods:</strong> Dr. Smith, Mr. Jones, Ph.D.</li>
                        <li><strong>Without periods:</strong> UN, NATO, CEO, DVD</li>
                        <li><strong>Metric units:</strong> km, kg, cm (no periods)</li>
                    </ul>
                </div>
                
                <div class="rule-box">
                    <h4>Spacing After Periods</h4>
                    <p>Use <strong>one space</strong> after periods in running text (not two).</p>
                </div>
            </div>
            
            <!-- Quiz Panel for Periods -->
            <div class="quiz-panel" id="quiz-periods"></div>
            
            <div class="section-footer">
                <button class="btn btn-primary" onclick="completeSection('periods')">
                    Mark Complete & Continue
                </button>
            </div>
        </section>
    </main>

    <!-- Include JavaScript modules -->
    <script type="module" src="../shared/js/router.js"></script>
    <script type="module" src="../shared/js/quiz-engine.js"></script>
    <script type="module" src="../shared/js/progress.js"></script>
    <script type="module" src="../shared/js/components.js"></script>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        
        const CHAPTER_ID = 'ch07';
        const sections = [
            { id: 'introduction', title: '7.01 Introduction' },
            { id: 'comma', title: '7.05 Comma' },
            { id: 'semicolon', title: '7.35 Semicolon' },
            { id: 'colon', title: '7.42 Colon' },
            { id: 'dashes', title: '7.51 Dashes' },
            { id: 'parentheses', title: '7.56 Parentheses' },
            { id: 'apostrophe', title: '7.15 Apostrophe' },
            { id: 'periods', title: '7.16 Periods' }
        ];
        
        // Initialize router
        router.init(CHAPTER_ID, sections);
        
        // Update progress bar
        function updateProgressBar() {
            const progress = window.getChapterProgress ? window.getChapterProgress(CHAPTER_ID) : 0;
            const progressFill = document.getElementById('chapterProgressFill');
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            if (window.setProgress) {
                window.setProgress(CHAPTER_ID, sectionId, true);
                updateProgressBar();
                
                // Find next section
                const currentIndex = sections.findIndex(s => s.id === sectionId);
                if (currentIndex < sections.length - 1) {
                    const nextSection = sections[currentIndex + 1];
                    router.navigateTo(CHAPTER_ID, nextSection.id);
                } else {
                    showChapterCompletion();
                }
            }
        };
        
        // Show chapter completion modal
        function showChapterCompletion() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2>🎉 Chapter Complete!</h2>
                    <p>You've mastered punctuation in Canadian English.</p>
                    <div class="modal-stats">
                        <div class="stat">
                            <span class="stat-value">8</span>
                            <span class="stat-label">Sections Completed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">100%</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
                        <button class="btn btn-primary" onclick="nextChapter()">
                            Next Chapter
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        window.nextChapter = function() {
            window.location.href = 'ch08-quotations.html';
        };
        
        // Load and initialize quizzes
        async function loadSectionQuizzes() {
            console.log('Loading quizzes for chapter:', CHAPTER_ID);
            
            try {
                // Try to fetch quiz data from JSON file
                const response = await fetch(`../data/quizzes/${CHAPTER_ID}-quiz.json`);
                
                if (!response.ok) {
                    console.warn('Quiz data file not found, using fallback quizzes');
                    initializeFallbackQuizzes();
                    return;
                }
                
                const quizData = await response.json();
                console.log('Quiz data loaded:', quizData);
                
                // Initialize quiz panels for each section
                Object.entries(quizData).forEach(([sectionKey, sectionData]) => {
                    const quizPanel = document.getElementById(`quiz-${sectionKey}`);
                    if (quizPanel && sectionData.questions && sectionData.questions.length > 0) {
                        const quizEngine = new QuizEngine(sectionData, CHAPTER_ID, sectionKey);
                        const quizElement = quizEngine.render();
                        quizPanel.appendChild(quizElement);
                        console.log(`Quiz initialized for section: ${sectionKey}`);
                    } else if (quizPanel) {
                        console.warn(`No quiz questions found for section: ${sectionKey}`);
                    }
                });
                
            } catch (error) {
                console.error('Error loading quizzes:', error);
                initializeFallbackQuizzes();
            }
        }
        
        // Fallback quizzes if JSON file is not available
        function initializeFallbackQuizzes() {
            console.log('Initializing fallback quizzes');
            
            const fallbackQuizData = {
                introduction: {
                    id: 'intro-quiz',
                    title: 'Test Your Understanding',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'What is the primary purpose of punctuation?',
                            options: [
                                { label: 'To make writing look professional', correct: false },
                                { label: 'To help readers understand structural relationships', correct: true },
                                { label: 'To follow grammar rules', correct: false },
                                { label: 'To separate words', correct: false }
                            ],
                            rationale: 'Punctuation primarily helps readers understand the structural relationship within and between sentences.'
                        },
                        {
                            type: 'mcq',
                            stem: 'Canadian style generally favours:',
                            options: [
                                { label: 'Heavy punctuation like British style', correct: false },
                                { label: 'Lighter punctuation than British style', correct: true },
                                { label: 'No punctuation at all', correct: false },
                                { label: 'American punctuation rules', correct: false }
                            ],
                            rationale: 'Canadian style generally favours lighter punctuation than British style.'
                        }
                    ]
                },
                comma: {
                    id: 'comma-quiz',
                    title: 'Comma Usage',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which sentence correctly uses commas with a restrictive clause?',
                            options: [
                                { label: 'The students, who studied hard, passed the exam.', correct: false },
                                { label: 'The students who studied hard passed the exam.', correct: true },
                                { label: 'The students who studied hard, passed the exam.', correct: false },
                                { label: 'The students, who studied hard passed the exam.', correct: false }
                            ],
                            rationale: 'Restrictive clauses (essential information) do not use commas.',
                            ref: '§7.14'
                        },
                        {
                            type: 'mcq',
                            stem: 'When should you use the Oxford comma in Canadian style?',
                            options: [
                                { label: 'Always', correct: false },
                                { label: 'Never', correct: false },
                                { label: 'Only when needed for clarity', correct: true },
                                { label: 'Only in formal documents', correct: false }
                            ],
                            rationale: 'Canadian Style recommends omitting the Oxford comma unless needed for clarity.'
                        }
                    ]
                },
                dashes: {
                    id: 'dashes-quiz',
                    title: 'Using Dashes',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which punctuation mark is MOST formal for parenthetical information?',
                            options: [
                                { label: 'Em dashes —', correct: false },
                                { label: 'Commas ,', correct: false },
                                { label: 'Parentheses ( )', correct: true },
                                { label: 'Brackets [ ]', correct: false }
                            ],
                            rationale: 'Parentheses are the most formal way to enclose parenthetical information.'
                        }
                    ]
                },
                apostrophe: {
                    id: 'apostrophe-quiz',
                    title: 'Apostrophe Rules',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which is correct?',
                            options: [
                                { label: "The dog wagged it's tail", correct: false },
                                { label: "The dog wagged its tail", correct: true },
                                { label: "The dog wagged its' tail", correct: false },
                                { label: "The dog wagged it tail", correct: false }
                            ],
                            rationale: '"Its" is the possessive form (like his/hers). "It\'s" is a contraction for "it is".'
                        }
                    ]
                }
            };
            
            // Initialize fallback quizzes
            Object.entries(fallbackQuizData).forEach(([sectionKey, sectionData]) => {
                const quizPanel = document.getElementById(`quiz-${sectionKey}`);
                if (quizPanel) {
                    const quizEngine = new QuizEngine(sectionData, CHAPTER_ID, sectionKey);
                    const quizElement = quizEngine.render();
                    quizPanel.appendChild(quizElement);
                    console.log(`Fallback quiz initialized for section: ${sectionKey}`);
                }
            });
        }
        
        // Initialize page
        function initializePage() {
            updateProgressBar();
            loadSectionQuizzes();
            
            // Setup navigation if router is available
            if (window.router) {
                window.router.currentChapter = CHAPTER_ID;
                window.router.setupSectionLinks();
                
                // Handle initial navigation
                if (!window.location.hash) {
                    window.router.navigateTo(CHAPTER_ID, 'introduction');
                }
            }
        }
        
        // Event listeners
        window.addEventListener('progress-changed', updateProgressBar);
        window.addEventListener('quiz-completed', (event) => {
            console.log('Quiz completed:', event.detail);
            updateProgressBar();
            
            // Auto-advance to next section after quiz completion
            const { sectionId } = event.detail;
            setTimeout(() => {
                completeSection(sectionId);
            }, 2000);
        });
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePage);
        } else {
            initializePage();
        }
    </script>

    <style>
        /* Chapter-specific styles */
        .examples-box {
            background: var(--cs-grey-50);
            border-left: 4px solid var(--cs-red);
            padding: var(--cs-space-l);
            margin: var(--cs-space-l) 0;
            border-radius: 0 8px 8px 0;
        }
        
        .example-pair {
            display: grid;
            gap: var(--cs-space-m);
        }
        
        .example {
            background: var(--cs-white);
            padding: var(--cs-space-m);
            border-radius: 6px;
            border: 1px solid var(--cs-grey-200);
        }
        
        .example small {
            display: block;
            color: var(--cs-grey-600);
            font-style: italic;
            margin-top: var(--cs-space-xs);
        }
        
        .rule-box {
            background: rgba(215, 25, 32, 0.05);
            border: 2px solid rgba(215, 25, 32, 0.2);
            padding: var(--cs-space-l);
            border-radius: 8px;
            margin: var(--cs-space-l) 0;
        }
        
        .rule-box h4 {
            color: var(--cs-red);
            margin-bottom: var(--cs-space-s);
        }
        
        .key-principle {
            background: linear-gradient(135deg, #d71920 0%, #b91419 100%);
            color: white;
            padding: var(--cs-space-l);
            border-radius: 8px;
            margin: var(--cs-space-xl) 0;
        }
        
        .key-principle h3 {
            color: white;
            margin-bottom: var(--cs-space-s);
        }
        
        .formality-scale {
            display: grid;
            gap: var(--cs-space-s);
            margin: var(--cs-space-m) 0;
        }
        
        .scale-item {
            padding: var(--cs-space-m);
            border-radius: 6px;
            border-left: 4px solid var(--cs-grey-400);
        }
        
        .scale-item.formal {
            border-left-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }
        
        .scale-item.informal {
            border-left-color: #ffc107;
            background: rgba(255, 193, 7, 0.1);
        }
        
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--cs-space-m);
            margin: var(--cs-space-l) 0;
        }
        
        .rule-item {
            background: var(--cs-grey-50);
            padding: var(--cs-space-l);
            border-radius: 8px;
            text-align: center;
        }
        
        .rule-item h4 {
            color: var(--cs-red);
            margin-bottom: var(--cs-space-s);
        }
        
        .error-examples {
            background: var(--cs-grey-50);
            padding: var(--cs-space-l);
            border-radius: 8px;
            margin: var(--cs-space-l) 0;
        }
        
        .error-item {
            display: grid;
            gap: var(--cs-space-s);
            padding: var(--cs-space-m) 0;
            border-bottom: 1px solid var(--cs-grey-200);
        }
        
        .error-item:last-child {
            border-bottom: none;
        }
        
        .wrong {
            color: #dc3545;
            font-weight: var(--cs-font-medium);
        }
        
        .right {
            color: #28a745;
            font-weight: var(--cs-font-medium);
        }
        
        .preference-box {
            background: rgba(40, 167, 69, 0.05);
            border: 2px solid rgba(40, 167, 69, 0.2);
            padding: var(--cs-space-l);
            border-radius: 8px;
            margin: var(--cs-space-l) 0;
        }
        
        .preference-box h4 {
            color: #28a745;
            margin-bottom: var(--cs-space-s);
        }
        
        /* Quiz Panel Styling */
        .quiz-panel {
            margin: var(--cs-space-xl) 0;
            padding: var(--cs-space-l);
            background: var(--cs-white);
            border: 2px solid var(--cs-grey-200);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .quiz-panel:empty {
            display: none;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: var(--cs-space-xl);
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .modal-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--cs-space-l);
            margin: var(--cs-space-l) 0;
        }
        
        .stat-value {
            display: block;
            font-size: 2rem;
            font-weight: var(--cs-font-bold);
            color: var(--cs-red);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--cs-grey-600);
        }
        
        .modal-actions {
            display: flex;
            gap: var(--cs-space-m);
            justify-content: center;
            margin-top: var(--cs-space-xl);
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .rules-grid {
                grid-template-columns: 1fr;
            }
            
            .example-pair {
                grid-template-columns: 1fr;
            }
            
            .modal-stats {
                grid-template-columns: 1fr;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>