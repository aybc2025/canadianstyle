<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Punctuation - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 7
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">07</div>
                <div>
                    <h1>Punctuation</h1>
                    <p>Master commas, semicolons, dashes, and all punctuation marks</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">7.01 Introduction</a>
                <a href="#period" class="tab-link" data-section="period">7.02 The Period</a>
                <a href="#question-mark" class="tab-link" data-section="question-mark">7.03 Question Mark</a>
                <a href="#exclamation" class="tab-link" data-section="exclamation">7.04 Exclamation Mark</a>
                <a href="#comma" class="tab-link" data-section="comma">7.05-7.16 The Comma</a>
                <a href="#semicolon" class="tab-link" data-section="semicolon">7.17 Semicolon</a>
                <a href="#colon" class="tab-link" data-section="colon">7.18 The Colon</a>
                <a href="#dashes" class="tab-link" data-section="dashes">7.19-7.20 Dashes</a>
                <a href="#parentheses" class="tab-link" data-section="parentheses">7.21 Parentheses</a>
                <a href="#apostrophe" class="tab-link" data-section="apostrophe">7.28 Apostrophe</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 7.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>7.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>The primary purpose of punctuation is to help the reader understand the structural relationship within and between sentences. This chapter covers the correct use of all major punctuation marks in Canadian English.</p>
                    
                    <p>Good punctuation clarifies meaning and prevents misunderstanding. Consider these examples:</p>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.01a</div>
                        <p><strong>Unclear:</strong> Let's eat grandma!</p>
                        <p><strong>Clear:</strong> Let's eat, grandma!</p>
                    </div>
                    
                    <p>This simple example shows how a single comma can completely change the meaning of a sentence. Throughout this chapter, you'll learn the rules that govern punctuation in formal Canadian writing.</p>
                    
                    <h3>Key Principles</h3>
                    <ul>
                        <li>Punctuation should clarify, not confuse</li>
                        <li>Consistency within a document is essential</li>
                        <li>When in doubt, opt for clarity over strict adherence to rules</li>
                        <li>Canadian style generally favours lighter punctuation than British style</li>
                    </ul>
                </div>
                
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 7.05-7.16: The Comma -->
            <section class="content-section" id="comma">
                <div class="section-header">
                    <h2>7.05‚Äì7.16 The Comma</h2>
                </div>
                
                <div class="lesson-content">
                    <p>The comma is the most frequently used‚Äîand misused‚Äîpunctuation mark. It serves many functions:</p>
                    
                    <h3>7.05 Series (Serial Comma)</h3>
                    <p>Use commas to separate items in a series of three or more. The Canadian Style recommends omitting the comma before the final "and" (Oxford comma) unless needed for clarity:</p>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.05</div>
                        <p><strong>Standard:</strong> red, white and blue</p>
                        <p><strong>For clarity:</strong> toast, juice, and ham and eggs</p>
                    </div>
                    
                    <h3>7.14 Restrictive vs. Non-restrictive</h3>
                    <p>This is one of the most important comma rules:</p>
                    
                    <ul>
                        <li><strong>Restrictive (essential):</strong> No commas‚Äîthe information is necessary to identify what you're talking about</li>
                        <li><strong>Non-restrictive (non-essential):</strong> Use commas‚Äîthe information adds detail but isn't necessary for identification</li>
                    </ul>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.14</div>
                        <p><strong>Restrictive:</strong> The people who arrived late missed the opening remarks.</p>
                        <p class="example-note">(Only some people arrived late)</p>
                        
                        <p><strong>Non-restrictive:</strong> The people, who arrived late, missed the opening remarks.</p>
                        <p class="example-note">(All the people arrived late)</p>
                    </div>
                    
                    <h3>7.16 Introductory Elements</h3>
                    <p>Use a comma after introductory words, phrases, or clauses:</p>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.16</div>
                        <p>However, the meeting was postponed.</p>
                        <p>After reviewing the documents, she made her decision.</p>
                        <p>When the rain stops, we'll continue the game.</p>
                    </div>
                    
                    <h3>Common Comma Errors</h3>
                    <ul>
                        <li><strong>Comma splice:</strong> Joining two independent clauses with only a comma</li>
                        <li><strong>Missing comma:</strong> After introductory elements</li>
                        <li><strong>Unnecessary comma:</strong> Between subject and verb</li>
                    </ul>
                </div>
                
                <div class="quiz-panel" id="quiz-comma"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('comma')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 7.19-7.20: Dashes -->
            <section class="content-section" id="dashes">
                <div class="section-header">
                    <h2>7.19‚Äì7.20 The Dash</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Canadian Style recognizes two types of dashes, each with specific uses:</p>
                    
                    <h3>7.19 The Em Dash (‚Äî)</h3>
                    <p>The em dash is the width of a capital M and is used for:</p>
                    
                    <ul>
                        <li><strong>Parenthetical statements:</strong> More emphatic than commas, less formal than parentheses</li>
                        <li><strong>Sudden breaks:</strong> To indicate an interruption or change of thought</li>
                        <li><strong>Emphasis:</strong> To highlight information at the end of a sentence</li>
                    </ul>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.19a</div>
                        <p>The report‚Äîwhich took six months to complete‚Äîwas finally submitted.</p>
                        <p>She was about to reveal the secret when‚Äî</p>
                        <p>There's only one person who could have done this‚Äîthe manager.</p>
                    </div>
                    
                    <p class="style-note"><strong>Canadian Style Note:</strong> Use em dashes without spaces on either side (‚Äî) rather than with spaces ( ‚Äî ).</p>
                    
                    <h3>7.20 The En Dash (‚Äì)</h3>
                    <p>The en dash is the width of a capital N and is used for:</p>
                    
                    <ul>
                        <li><strong>Ranges:</strong> Numbers, dates, times</li>
                        <li><strong>Connections:</strong> Between words of equal weight</li>
                        <li><strong>Complex compounds:</strong> When one element contains spaces</li>
                    </ul>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.20</div>
                        <p>Pages 25‚Äì30</p>
                        <p>The Toronto‚ÄìMontreal train</p>
                        <p>The pre‚ÄìWorld War II era</p>
                        <p>Monday‚ÄìFriday, 9:00 a.m.‚Äì5:00 p.m.</p>
                    </div>
                    
                    <h3>Typing Dashes</h3>
                    <div class="tech-tip">
                        <h4>üí° Technical Tip</h4>
                        <ul>
                            <li><strong>Em dash:</strong> Alt+0151 (Windows) or Option+Shift+hyphen (Mac)</li>
                            <li><strong>En dash:</strong> Alt+0150 (Windows) or Option+hyphen (Mac)</li>
                            <li><strong>Acceptable substitute:</strong> Two hyphens (--) for em dash in plain text</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-dashes"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('dashes')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Section 7.28: Apostrophe -->
            <section class="content-section" id="apostrophe">
                <div class="section-header">
                    <h2>7.28 The Apostrophe</h2>
                </div>
                
                <div class="lesson-content">
                    <p>The apostrophe has three main uses in Canadian English:</p>
                    
                    <h3>1. Possession</h3>
                    <p>Show ownership or association:</p>
                    
                    <div class="example-box">
                        <div class="example-label">Singular Possession</div>
                        <p>The minister's decision</p>
                        <p>James's book (or James' book‚Äîboth acceptable)</p>
                        <p>The boss's office</p>
                    </div>
                    
                    <div class="example-box">
                        <div class="example-label">Plural Possession</div>
                        <p>The ministers' decision (multiple ministers)</p>
                        <p>The bosses' offices</p>
                        <p>The children's playground (irregular plural)</p>
                    </div>
                    
                    <h3>2. Contractions</h3>
                    <p>Indicate omitted letters (use sparingly in formal writing):</p>
                    
                    <ul>
                        <li>it's = it is (NOT possessive)</li>
                        <li>can't = cannot</li>
                        <li>won't = will not</li>
                        <li>'90s = 1990s</li>
                    </ul>
                    
                    <h3>3. Plurals of Letters and Symbols</h3>
                    <p>Use apostrophes for clarity with lowercase letters:</p>
                    
                    <div class="example-box">
                        <div class="example-label">Example 7.28c</div>
                        <p>Mind your p's and q's</p>
                        <p>Count the number of i's in Mississippi</p>
                        <p>But: Learn your ABCs (no apostrophe for capitals)</p>
                    </div>
                    
                    <h3>Common Apostrophe Errors</h3>
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Avoid These Mistakes</h4>
                        <ul>
                            <li><strong>Its vs. It's:</strong> "Its" is possessive; "it's" means "it is"</li>
                            <li><strong>Plural confusion:</strong> The Smith's house ‚ùå ‚Üí The Smiths' house ‚úì</li>
                            <li><strong>Unnecessary apostrophes:</strong> 1990's ‚ùå ‚Üí 1990s ‚úì</li>
                        </ul>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-apostrophe"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('apostrophe')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>
            
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine, loadQuizData } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch07';
        const sections = [
            { id: 'introduction', title: '7.01 Introduction' },
            { id: 'period', title: '7.02 The Period' },
            { id: 'question-mark', title: '7.03 Question Mark' },
            { id: 'exclamation', title: '7.04 Exclamation Mark' },
            { id: 'comma', title: '7.05-7.16 The Comma' },
            { id: 'semicolon', title: '7.17 Semicolon' },
            { id: 'colon', title: '7.18 The Colon' },
            { id: 'dashes', title: '7.19-7.20 Dashes' },
            { id: 'parentheses', title: '7.21 Parentheses' },
            { id: 'apostrophe', title: '7.28 Apostrophe' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress();
            const chapterProgress = progress[CHAPTER_ID] || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                router.navigateTo(CHAPTER_ID, nextSection.id);
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-icon">üéâ</div>
                    <h2>Chapter Complete!</h2>
                    <p>Excellent work! You've mastered punctuation in Canadian English.</p>
                    <div class="modal-stats">
                        <div class="stat">
                            <span class="stat-value">10</span>
                            <span class="stat-label">Sections Completed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">100%</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
                        <button class="btn btn-primary" onclick="nextChapter()">
                            Next Chapter
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        window.nextChapter = function() {
            window.location.href = 'ch08-quotations.html';
        };
        
        // Load quizzes
        async function loadSectionQuizzes() {
            // Sample quiz data - in real implementation, load from JSON
            const quizData = {
                introduction: {
                    id: 'intro-quiz',
                    title: 'Test Your Understanding',
                    chapterId: CHAPTER_ID,
                    sectionId: 'introduction',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'What is the primary purpose of punctuation?',
                            options: [
                                { label: 'To make writing look professional', correct: false },
                                { label: 'To help readers understand structural relationships', correct: true },
                                { label: 'To follow grammar rules', correct: false },
                                { label: 'To separate words', correct: false }
                            ],
                            rationale: 'Punctuation primarily helps readers understand the structural relationship within and between sentences.'
                        }
                    ]
                },
                comma: {
                    id: 'comma-quiz',
                    title: 'Comma Usage',
                    chapterId: CHAPTER_ID,
                    sectionId: 'comma',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which sentence correctly uses commas with a restrictive clause?',
                            options: [
                                { label: 'The students, who studied hard, passed the exam.', correct: false },
                                { label: 'The students who studied hard passed the exam.', correct: true },
                                { label: 'The students who studied hard, passed the exam.', correct: false },
                                { label: 'The students, who studied hard passed the exam.', correct: false }
                            ],
                            rationale: 'Restrictive clauses (essential information) do not use commas.',
                            ref: '¬ß7.14'
                        },
                        {
                            type: 'error-spot',
                            stem: 'Click on the comma error in this sentence:',
                            text: 'However the meeting was postponed due to weather',
                            errorIndex: 1,
                            rationale: 'A comma is needed after the introductory word "However".'
                        }
                    ]
                },
                dashes: {
                    id: 'dashes-quiz',
                    title: 'Using Dashes',
                    chapterId: CHAPTER_ID,
                    sectionId: 'dashes',
                    questions: [
                        {
                            type: 'drag-drop',
                            stem: 'Order these dash uses from most to least formal:',
                            options: [
                                { label: 'Parentheses ( )', order: 1 },
                                { label: 'Commas ,', order: 2 },
                                { label: 'Em dashes ‚Äî', order: 3 },
                                { label: 'Exclamation marks !', order: 4 }
                            ]
                        }
                    ]
                }
            };
            
            // Initialize quizzes
            for (const section of sections) {
                const quiz = quizData[section.id];
                if (quiz) {
                    const container = document.getElementById(`quiz-${section.id}`);
                    if (container) {
                        const engine = new QuizEngine(`quiz-${section.id}`, quiz);
                        engine.init();
                    }
                }
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar();
            loadSectionQuizzes();
            
            if (!window.location.hash) {
                router.navigateTo(CHAPTER_ID, 'introduction');
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>