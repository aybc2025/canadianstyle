<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: Capitalization - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-wrapper">
                <img src="../shared/img/maple-logo.svg" alt="Canadian Style Logo" class="logo">
                <h1>The Canadian Style</h1>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="btn btn-secondary">Back to Dashboard</a>
            </nav>
        </div>
    </header>

    <div class="chapter-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../index.html">Home</a> / Chapter 4
            </nav>
            <div class="chapter-meta">
                <div class="chapter-icon">4</div>
                <div>
                    <h1>Capitalization</h1>
                    <p>Master the rules for capitalizing words in Canadian government writing</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="chapterProgress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <nav class="section-tabs" id="sectionNav">
        <div class="container">
            <div class="tabs-list">
                <a href="#introduction" class="tab-link" data-section="introduction">4.01 Introduction</a>
                <a href="#initial-words" class="tab-link" data-section="initial-words">4.02 Initial Words</a>
                <a href="#personal-names" class="tab-link" data-section="personal-names">4.03 Personal Names</a>
                <a href="#government" class="tab-link" data-section="government">4.04 Government</a>
                <a href="#titles" class="tab-link" data-section="titles">4.05 Titles</a>
                <a href="#geography" class="tab-link" data-section="geography">4.06 Geography</a>
                <a href="#publications" class="tab-link" data-section="publications">4.07 Publications</a>
                <a href="#headings" class="tab-link" data-section="headings">4.08 Headings</a>
            </div>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="container">
            <!-- Section 4.01: Introduction -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>4.01 Introduction</h2>
                </div>
                
                <div class="lesson-content">
                    <p>Capitalization rules help readers distinguish between different types of words and understand their importance. Proper capitalization shows respect for institutions, people, and formal concepts while maintaining consistency in professional documents.</p>
                    
                    <h3>Basic Principles</h3>
                    <ul>
                        <li><strong>Consistency:</strong> Apply the same rules throughout your document</li>
                        <li><strong>Purpose:</strong> Capitalize to show importance or specificity</li>
                        <li><strong>Context:</strong> Consider whether terms are used specifically or generally</li>
                    </ul>
                    
                    <div class="tip-box">
                        <h4>ðŸ’¡ Key Rule</h4>
                        <p>When in doubt, consider whether you're referring to something specific (capitalize) or something general (lowercase).</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Complete Section â†’ Initial Words
                    </button>
                </div>
            </section>

            <!-- Section 4.02: Initial Words -->
            <section class="content-section" id="initial-words">
                <div class="section-header">
                    <h2>4.02 Initial Words</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Sentence Beginnings</h3>
                    <p>Always capitalize the first word of:</p>
                    <ul>
                        <li>Complete sentences</li>
                        <li>Questions and exclamations</li>
                        <li>Direct quotations that are complete sentences</li>
                        <li>Items in vertical lists (when they are complete sentences)</li>
                    </ul>
                    
                    <div class="examples-box">
                        <h4>Examples</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ Correct:</strong></p>
                            <ul>
                                <li>The meeting starts at 9 a.m.</li>
                                <li>What time does the presentation begin?</li>
                                <li>She said, "The budget has been approved."</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-initial-words"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('initial-words')">
                        Complete Section â†’ Personal Names
                    </button>
                </div>
            </section>

            <!-- Section 4.03: Personal Names -->
            <section class="content-section" id="personal-names">
                <div class="section-header">
                    <h2>4.03 Personal Names</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Names and Titles</h3>
                    <p>Capitalize all parts of personal names and titles when used with names:</p>
                    
                    <div class="rule-box">
                        <h4>Always Capitalize</h4>
                        <ul>
                            <li>Given names and surnames: <em>Jean ChrÃ©tien</em></li>
                            <li>Titles before names: <em>Prime Minister Trudeau</em></li>
                            <li>Professional designations: <em>Dr. Smith, Prof. Johnson</em></li>
                            <li>Religious titles: <em>Father Martin, Rabbi Cohen</em></li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Title Capitalization Rules</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ With names (capitalize):</strong></p>
                            <ul>
                                <li>Minister Jones addressed the committee</li>
                                <li>Director Smith approved the proposal</li>
                                <li>Senator Brown asked the question</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>âœ— Without names (lowercase):</strong></p>
                            <ul>
                                <li>The minister addressed the committee</li>
                                <li>The director approved the proposal</li>
                                <li>The senator asked the question</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-personal-names"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('personal-names')">
                        Complete Section â†’ Government
                    </button>
                </div>
            </section>

            <!-- Section 4.04: Government -->
            <section class="content-section" id="government">
                <div class="section-header">
                    <h2>4.04 Government Bodies</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Government Institutions</h3>
                    <p>Capitalize names of government bodies, departments, and formal institutions:</p>
                    
                    <div class="rule-box">
                        <h4>Capitalize These</h4>
                        <ul>
                            <li><strong>Government levels:</strong> Government of Canada, Province of Ontario</li>
                            <li><strong>Departments:</strong> Department of Finance, Ministry of Health</li>
                            <li><strong>Agencies:</strong> Canada Revenue Agency, Statistics Canada</li>
                            <li><strong>Legislative bodies:</strong> Parliament, House of Commons, Senate</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Specific vs. General References</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ Specific (capitalize):</strong></p>
                            <ul>
                                <li>The Department of Health issued new guidelines</li>
                                <li>Parliament will vote on the bill</li>
                                <li>The Government of Canada announced the policy</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>âœ— General (lowercase):</strong></p>
                            <ul>
                                <li>The federal government issued new guidelines</li>
                                <li>Many governments face this challenge</li>
                                <li>The departmental structure was reorganized</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-government"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('government')">
                        Complete Section â†’ Titles
                    </button>
                </div>
            </section>

            <!-- Section 4.05: Titles -->
            <section class="content-section" id="titles">
                <div class="section-header">
                    <h2>4.05 Titles of Works</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Publications and Documents</h3>
                    <p>Capitalize titles of books, reports, articles, and other published works:</p>
                    
                    <div class="rule-box">
                        <h4>Title Capitalization Rules</h4>
                        <ul>
                            <li><strong>Always capitalize:</strong> First and last words</li>
                            <li><strong>Always capitalize:</strong> All nouns, verbs, adjectives, adverbs</li>
                            <li><strong>Lowercase:</strong> Articles (a, an, the), conjunctions (and, but, or), prepositions under 5 letters</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Examples</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ Correct:</strong></p>
                            <ul>
                                <li><em>The Canadian Style: A Guide to Writing and Editing</em></li>
                                <li><em>Annual Report on the State of the Canadian Economy</em></li>
                                <li><em>Guidelines for Effective Communication</em></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-titles"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('titles')">
                        Complete Section â†’ Geography
                    </button>
                </div>
            </section>

            <!-- Section 4.06: Geography -->
            <section class="content-section" id="geography">
                <div class="section-header">
                    <h2>4.06 Geographical Names</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Places and Regions</h3>
                    <p>Capitalize proper names of geographical locations:</p>
                    
                    <div class="rule-box">
                        <h4>Always Capitalize</h4>
                        <ul>
                            <li><strong>Cities and towns:</strong> Toronto, Vancouver, Yellowknife</li>
                            <li><strong>Provinces and territories:</strong> British Columbia, Nunavut</li>
                            <li><strong>Countries:</strong> Canada, United States, United Kingdom</li>
                            <li><strong>Geographic features:</strong> Rocky Mountains, Great Lakes, St. Lawrence River</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>Directional Terms</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ Regions (capitalize):</strong></p>
                            <ul>
                                <li>Atlantic Canada, Western Canada</li>
                                <li>the North, the Arctic</li>
                                <li>Southern Ontario, Northern Alberta</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>âœ— Directions (lowercase):</strong></p>
                            <ul>
                                <li>Drive north on Highway 401</li>
                                <li>The office is south of downtown</li>
                                <li>Head west from the city center</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-geography"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('geography')">
                        Complete Section â†’ Publications
                    </button>
                </div>
            </section>

            <!-- Section 4.07: Publications -->
            <section class="content-section" id="publications">
                <div class="section-header">
                    <h2>4.07 Publications and Media</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Newspapers, Magazines, and Media</h3>
                    <p>Capitalize names of publications, but be careful with articles:</p>
                    
                    <div class="rule-box">
                        <h4>Publication Names</h4>
                        <ul>
                            <li><strong>Newspapers:</strong> <em>The Globe and Mail</em>, <em>Toronto Star</em></li>
                            <li><strong>Magazines:</strong> <em>Maclean's</em>, <em>Canadian Geographic</em></li>
                            <li><strong>Journals:</strong> <em>Canadian Public Policy</em></li>
                            <li><strong>Reports:</strong> <em>Budget 2024: Fairness for Every Generation</em></li>
                        </ul>
                    </div>
                    
                    <div class="tip-box">
                        <h4>ðŸ’¡ Article Usage</h4>
                        <p>Include "The" in the title only if it's part of the official name. When in doubt, check the publication's masthead or official website.</p>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-publications"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('publications')">
                        Complete Section â†’ Headings
                    </button>
                </div>
            </section>

            <!-- Section 4.08: Headings -->
            <section class="content-section" id="headings">
                <div class="section-header">
                    <h2>4.08 Headings and Lists</h2>
                </div>
                
                <div class="lesson-content">
                    <h3>Document Structure</h3>
                    <p>Apply consistent capitalization to headings and list items:</p>
                    
                    <div class="rule-box">
                        <h4>Heading Styles</h4>
                        <ul>
                            <li><strong>Title case:</strong> Capitalize major words (recommended for formal documents)</li>
                            <li><strong>Sentence case:</strong> Capitalize first word only (acceptable for informal documents)</li>
                            <li><strong>Consistency:</strong> Use the same style throughout your document</li>
                        </ul>
                    </div>
                    
                    <div class="examples-box">
                        <h4>List Capitalization</h4>
                        <div class="example-item good">
                            <p><strong>âœ“ Complete sentences in lists:</strong></p>
                            <ul>
                                <li>The policy addresses three main areas:</li>
                                <li>â€¢ Economic development will receive increased funding.</li>
                                <li>â€¢ Environmental protection remains a priority.</li>
                                <li>â€¢ Social programs will be enhanced.</li>
                            </ul>
                        </div>
                        <div class="example-item bad">
                            <p><strong>âœ— Sentence fragments in lists:</strong></p>
                            <ul>
                                <li>The policy addresses:</li>
                                <li>â€¢ economic development</li>
                                <li>â€¢ environmental protection</li>
                                <li>â€¢ social programs</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-panel" id="quiz-headings"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('headings')">
                        Complete Chapter
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Government of Canada. Based on <em>The Canadian Style</em> (1997 revised edition)</p>
        </div>
    </footer>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        import '../shared/js/components.js';
        
        const CHAPTER_ID = 'ch04';
        const sections = [
            { id: 'introduction', title: '4.01 Introduction' },
            { id: 'initial-words', title: '4.02 Initial Words' },
            { id: 'personal-names', title: '4.03 Personal Names' },
            { id: 'government', title: '4.04 Government' },
            { id: 'titles', title: '4.05 Titles' },
            { id: 'geography', title: '4.06 Geography' },
            { id: 'publications', title: '4.07 Publications' },
            { id: 'headings', title: '4.08 Headings' }
        ];
        
        // Initialize progress bar
        function updateProgressBar() {
            const progress = getProgress(CHAPTER_ID);
            const chapterProgress = progress || {};
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            document.getElementById('chapterProgress').style.width = percentage + '%';
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                showSection(nextSection.id);
                updateActiveTab(document.querySelector(`[data-section="${nextSection.id}"]`));
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        // Section navigation
        function initSectionNavigation() {
            const tabs = document.querySelectorAll('.tab-link');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.getAttribute('data-section');
                    showSection(sectionId);
                    updateActiveTab(tab);
                    window.location.hash = sectionId;
                });
            });
            
            // Handle initial hash
            const hash = window.location.hash.replace('#', '');
            if (hash && document.getElementById(hash)) {
                const tab = document.querySelector(`[data-section="${hash}"]`);
                if (tab) {
                    showSection(hash);
                    updateActiveTab(tab);
                }
            } else {
                // Default to first section
                showSection('introduction');
                updateActiveTab(tabs[0]);
            }
        }
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>ðŸŽ‰ Chapter 4 Complete!</h3>
                    <p>You've mastered capitalization rules. Your documents will have consistent and professional formatting.</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes from JSON files
        async function loadSectionQuizzes() {
            try {
                const response = await fetch(`../data/ch04-quiz.json`);
                if (!response.ok) {
                    console.warn('Quiz data not available for chapter 4');
                    return;
                }
                
                const quizData = await response.json();
                
                // Initialize quizzes for sections that have them
                sections.forEach(section => {
                    const sectionQuizData = quizData.sections?.[section.id];
                    if (sectionQuizData && sectionQuizData.questions) {
                        const quizContainer = document.getElementById(`quiz-${section.id}`);
                        if (quizContainer) {
                            const quizEngine = new QuizEngine(sectionQuizData, CHAPTER_ID, section.id);
                            quizEngine.render(quizContainer);
                        }
                    }
                });
            } catch (error) {
                console.warn('Error loading quiz data:', error);
            }
        }
        
        // Initialize page
        initSectionNavigation();
        updateProgressBar();
        loadSectionQuizzes();
        
        // Handle window beforeunload for quiz warnings
        window.addEventListener('beforeunload', (event) => {
            const activeQuiz = document.querySelector('.quiz-engine-container .quiz-in-progress');
            if (activeQuiz) {
                event.preventDefault();
                event.returnValue = 'You have a quiz in progress. Are you sure you want to leave?';
            }
        });
    </script>
</body>
</html>
