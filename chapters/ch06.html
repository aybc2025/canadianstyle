<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Italics - The Canadian Style</title>
    <link rel="stylesheet" href="../shared/css/main.css">
    <link rel="stylesheet" href="../shared/css/quiz-styles.css">
</head>
<body>
    <div class="chapter-container">
        <header class="chapter-header">
            <div class="breadcrumb">
                <a href="../index.html" class="breadcrumb-link">← Dashboard</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Chapter 6: Italics</span>
            </div>
            <div class="chapter-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="chapterProgress"></div>
                </div>
                <span class="progress-text">Progress</span>
            </div>
        </header>

        <nav class="chapter-nav">
            <div class="nav-links">
                <a href="#introduction" class="tab-link active" data-section="introduction">6.01 Introduction</a>
                <a href="#emphasis" class="tab-link" data-section="emphasis">6.02 Emphasis</a>
                <a href="#titles" class="tab-link" data-section="titles">6.03 Titles</a>
                <a href="#foreign-words" class="tab-link" data-section="foreign-words">6.04 Foreign Words</a>
            </div>
        </nav>

        <main class="chapter-content">
            <!-- Introduction Section -->
            <section class="content-section" id="introduction">
                <div class="section-header">
                    <h2>6.01 Introduction to Italics</h2>
                </div>
                
                <div class="content-block">
                    <p>Italics serve specific purposes in Canadian government writing: to indicate titles, foreign words, and occasional emphasis. Use italics sparingly and consistently to maintain professional appearance and readability.</p>
                    
                    <div class="key-principles">
                        <h3>When to Use Italics</h3>
                        <ul>
                            <li>Titles of books, newspapers, magazines, and major works</li>
                            <li>Foreign words not yet adopted into English</li>
                            <li>Scientific names and legal case names</li>
                            <li>Occasional emphasis (sparingly)</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Common Uses</h4>
                            <ul>
                                <li><em>The Globe and Mail</em> (newspaper)</li>
                                <li><em>Annual Report</em> (publication)</li>
                                <li><em>raison d'être</em> (foreign phrase)</li>
                                <li><em>R. v. Smith</em> (legal case)</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Avoid Italics For</h4>
                            <ul>
                                <li>Article titles (use quotation marks)</li>
                                <li>Common foreign words (café, menu)</li>
                                <li>Frequent emphasis (reduces impact)</li>
                                <li>Entire paragraphs (hard to read)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Introduction -->
                <div class="quiz-panel" id="quiz-introduction"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('introduction')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Emphasis Section -->
            <section class="content-section" id="emphasis" style="display: none;">
                <div class="section-header">
                    <h2>6.02 Emphasis</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>Using Italics for Emphasis</h4>
                        <p>Italics can provide emphasis, but should be used sparingly. Too much emphasis reduces its effectiveness and makes text harder to read.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Appropriate Emphasis</h4>
                            <ul>
                                <li>This is <em>not</em> acceptable</li>
                                <li>The deadline is <em>tomorrow</em></li>
                                <li>We <em>must</em> complete this today</li>
                                <li>The <em>only</em> solution is to revise</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Better Alternatives</h4>
                            <ul>
                                <li><strong>Bold:</strong> for headings and labels</li>
                                <li><strong>Structure:</strong> better paragraph organization</li>
                                <li><strong>Word choice:</strong> stronger verbs and nouns</li>
                                <li><strong>Punctuation:</strong> dashes for dramatic effect</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Guidelines</h4>
                        <ul>
                            <li>Limit to one or two emphasized words per paragraph</li>
                            <li>Don't italicize entire sentences or phrases</li>
                            <li>Avoid italics in headings and titles</li>
                            <li>Consider if emphasis is truly necessary</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Effective Examples</h4>
                            <ul>
                                <li>Applications <em>must</em> be received by Friday</li>
                                <li>This applies to <em>all</em> employees</li>
                                <li>Payment is due <em>immediately</em></li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Overuse (Avoid)</h4>
                            <ul>
                                <li>❌ <em>All applications must be received by Friday</em></li>
                                <li>❌ This is <em>very important</em> and <em>urgent</em></li>
                                <li>❌ <em>Please note</em> that <em>all employees</em> must...</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Emphasis -->
                <div class="quiz-panel" id="quiz-emphasis"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('emphasis')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Titles Section -->
            <section class="content-section" id="titles" style="display: none;">
                <div class="section-header">
                    <h2>6.03 Titles</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>When to Italicize Titles</h4>
                        <p>Italicize titles of complete, independent works. Use quotation marks for parts of larger works.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Italicized Titles</h4>
                            <ul>
                                <li><strong>Books:</strong> <em>The Canadian Style</em></li>
                                <li><strong>Newspapers:</strong> <em>The Globe and Mail</em></li>
                                <li><strong>Magazines:</strong> <em>Maclean's</em></li>
                                <li><strong>Reports:</strong> <em>Annual Report to Parliament</em></li>
                                <li><strong>Films:</strong> <em>The Sweet Hereafter</em></li>
                                <li><strong>TV shows:</strong> <em>The National</em></li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Quotation Marks</h4>
                            <ul>
                                <li><strong>Articles:</strong> "Climate Change Policy"</li>
                                <li><strong>Chapters:</strong> "Introduction to Grammar"</li>
                                <li><strong>Short stories:</strong> "The Hockey Sweater"</li>
                                <li><strong>Songs:</strong> "O Canada"</li>
                                <li><strong>Episodes:</strong> "The Prime Minister's Interview"</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Government Documents</h4>
                        <ul>
                            <li><strong>Major reports:</strong> <em>Truth and Reconciliation Commission Report</em></li>
                            <li><strong>Acts:</strong> <em>Official Languages Act</em></li>
                            <li><strong>White papers:</strong> <em>A New Framework for Immigration</em></li>
                            <li><strong>Policy documents:</strong> <em>Digital Charter Implementation Plan</em></li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Special Cases</h4>
                            <ul>
                                <li><strong>Series:</strong> <em>Canadian Public Policy</em> (journal)</li>
                                <li><strong>Websites:</strong> Canada.ca (no italics)</li>
                                <li><strong>Blogs:</strong> <em>Policy Horizons Canada</em></li>
                                <li><strong>Databases:</strong> <em>Statistics Canada</em></li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Internal Documents</h4>
                            <ul>
                                <li><strong>Major:</strong> <em>Strategic Plan 2024-2029</em></li>
                                <li><strong>Minor:</strong> "Weekly Status Report"</li>
                                <li><strong>Memos:</strong> "Budget Update - March 2024"</li>
                                <li><strong>Procedures:</strong> "Emergency Response Protocol"</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Titles -->
                <div class="quiz-panel" id="quiz-titles"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('titles')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>

            <!-- Foreign Words Section -->
            <section class="content-section" id="foreign-words" style="display: none;">
                <div class="section-header">
                    <h2>6.04 Foreign Words</h2>
                </div>
                
                <div class="content-block">
                    <div class="rule-box">
                        <h4>When to Italicize Foreign Words</h4>
                        <p>Italicize foreign words that have not been fully adopted into English. Once a word is considered part of English, italics are no longer needed.</p>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Still Foreign (Italicize)</h4>
                            <ul>
                                <li><em>raison d'être</em> (reason for being)</li>
                                <li><em>vis-à-vis</em> (in relation to)</li>
                                <li><em>de facto</em> (in fact)</li>
                                <li><em>per se</em> (by itself)</li>
                                <li><em>sine qua non</em> (essential element)</li>
                                <li><em>ad hoc</em> (for this purpose)</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Now English (No Italics)</h4>
                            <ul>
                                <li>café, menu, résumé</li>
                                <li>depot, bureau, entrepreneur</li>
                                <li>kindergarten, gesundheit</li>
                                <li>fiesta, plaza, tornado</li>
                                <li>karate, sushi, tsunami</li>
                                <li>etc., i.e., e.g.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Canadian Context</h4>
                        <p>In Canadian government writing, consider both English and French contexts:</p>
                        <ul>
                            <li><strong>French terms:</strong> Often part of Canadian English</li>
                            <li><strong>Legal terms:</strong> May be italicized even if familiar</li>
                            <li><strong>Place names:</strong> Generally no italics</li>
                            <li><strong>Official titles:</strong> Use original language, may italicize</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>Legal and Scientific</h4>
                            <ul>
                                <li><em>R. v. Smith</em> (case citation)</li>
                                <li><em>prima facie</em> (at first sight)</li>
                                <li><em>habeas corpus</em> (have the body)</li>
                                <li><em>Homo sapiens</em> (scientific name)</li>
                                <li><em>in camera</em> (in private)</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Canadian French</h4>
                            <ul>
                                <li>Québec (place name, no italics)</li>
                                <li>fleur-de-lis (now English)</li>
                                <li><em>joie de vivre</em> (still foreign)</li>
                                <li>poutine (now English)</li>
                                <li><em>savoir-faire</em> (still foreign)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="rule-box">
                        <h4>Guidelines for Decision</h4>
                        <ul>
                            <li>Check current Canadian dictionaries</li>
                            <li>Consider your audience's familiarity</li>
                            <li>When in doubt, italicize and define</li>
                            <li>Be consistent throughout documents</li>
                        </ul>
                    </div>
                    
                    <div class="examples-grid">
                        <div class="example-item">
                            <h4>With Definitions</h4>
                            <ul>
                                <li>The <em>status quo</em> (existing state) must change</li>
                                <li>We need an <em>ad hoc</em> committee for this</li>
                                <li>This is the <em>sine qua non</em> of good policy</li>
                            </ul>
                        </div>
                        
                        <div class="example-item">
                            <h4>Plurals</h4>
                            <ul>
                                <li><em>datum</em> → <em>data</em> (now English)</li>
                                <li><em>memorandum</em> → <em>memoranda</em></li>
                                <li><em>criterion</em> → <em>criteria</em></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Quiz Panel for Foreign Words -->
                <div class="quiz-panel" id="quiz-foreign-words"></div>
                
                <div class="section-footer">
                    <button class="btn btn-primary" onclick="completeSection('foreign-words')">
                        Mark Complete & Continue
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Include JavaScript modules -->
    <script type="module" src="../shared/js/router.js"></script>
    <script type="module" src="../shared/js/quiz-engine.js"></script>
    <script type="module" src="../shared/js/progress.js"></script>
    <script type="module" src="../shared/js/components.js"></script>

    <script type="module">
        import { router } from '../shared/js/router.js';
        import { getChapterProgress, setProgress } from '../shared/js/progress.js';
        import { QuizEngine } from '../shared/js/quiz-engine.js';
        
        const CHAPTER_ID = 'ch06';
        const sections = [
            { id: 'introduction', title: '6.01 Introduction' },
            { id: 'emphasis', title: '6.02 Emphasis' },
            { id: 'titles', title: '6.03 Titles' },
            { id: 'foreign-words', title: '6.04 Foreign Words' }
        ];
        
        // Initialize router
        router.init(CHAPTER_ID, sections);
        
        // Update progress bar using correct API
        function updateProgressBar() {
            const chapterProgress = getChapterProgress(CHAPTER_ID);
            const completed = Object.values(chapterProgress).filter(Boolean).length;
            const percentage = Math.round((completed / sections.length) * 100);
            
            const progressBar = document.getElementById('chapterProgress');
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
        }
        
        // Mark section as complete
        window.completeSection = function(sectionId) {
            setProgress(CHAPTER_ID, sectionId, true);
            updateProgressBar();
            
            // Navigate to next section
            const currentIndex = sections.findIndex(s => s.id === sectionId);
            if (currentIndex < sections.length - 1) {
                const nextSection = sections[currentIndex + 1];
                router.navigateTo(CHAPTER_ID, nextSection.id);
            } else {
                // Chapter complete
                showCompletionModal();
            }
        };
        
        function showCompletionModal() {
            const modal = document.createElement('div');
            modal.className = 'completion-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>🎉 Chapter 6 Complete!</h3>
                    <p>You've mastered the use of italics. Ready for the next chapter?</p>
                    <div class="modal-actions">
                        <button class="btn btn-outline" onclick="this.closest('.completion-modal').remove()">
                            Stay Here
                        </button>
                        <a href="../index.html" class="btn btn-primary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Load section quizzes - FIXED VERSION
        async function loadSectionQuizzes() {
            // Sample quiz data - in real implementation, this would come from JSON files
            const quizData = {
                introduction: {
                    title: 'Introduction to Italics',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'What is the main principle for using italics?',
                            options: [
                                { label: 'Use them frequently for emphasis', correct: false },
                                { label: 'Use them sparingly and consistently', correct: true },
                                { label: 'Use them only for foreign words', correct: false },
                                { label: 'Use them instead of quotation marks', correct: false }
                            ],
                            rationale: 'Italics should be used sparingly and consistently to maintain professional appearance.',
                            ref: '§6.01'
                        }
                    ]
                },
                emphasis: {
                    title: 'Emphasis',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'How many words should typically be emphasized per paragraph?',
                            options: [
                                { label: 'As many as needed', correct: false },
                                { label: 'One or two words maximum', correct: true },
                                { label: 'No more than five words', correct: false },
                                { label: 'At least three words', correct: false }
                            ],
                            rationale: 'Limit emphasis to one or two words per paragraph for maximum effectiveness.',
                            ref: '§6.02'
                        }
                    ]
                },
                titles: {
                    title: 'Titles',
                    questions: [
                        {
                            type: 'mcq',
                            stem: 'Which title should be italicized?',
                            options: [
                                { label: '"The Prime Minister\'s Speech" (article)', correct: false },
                                { label: 'The Globe and Mail (newspaper)', correct: true },
                                { label: '"Chapter 1: Introduction" (chapter)', correct: false },
                                { label: '"O Canada" (song)', correct: false }
                            ],
                            rationale: 'Newspaper titles are italicized as complete, independent works.',
                            ref: '§6.03'
                        }
                    ]
                },
                'foreign-words': {
                    title: 'Foreign Words',
                    questions: [
                        {
                            type: 'fill-blank',
                            stem: 'Should "café" be italicized in Canadian government writing?',
                            answer: 'no',
                            rationale: 'Café is now part of English and doesn\'t need italics.',
                            ref: '§6.04'
                        }
                    ]
                }
            };
            
            // Initialize quizzes using FIXED API
            for (const section of sections) {
                const quiz = quizData[section.id];
                if (quiz) {
                    const container = document.getElementById(`quiz-${section.id}`);
                    if (container) {
                        // FIXED: Use correct constructor parameters
                        const engine = new QuizEngine(quiz, CHAPTER_ID, section.id);
                        const quizElement = engine.render();
                        container.appendChild(quizElement);
                    }
                }
            }
        }
        
        // Initialize navigation
        function initializeNavigation() {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                    updateActiveTab(link);
                });
            });
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
        }
        
        function updateActiveTab(activeLink) {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
            });
            activeLink.classList.add('active');
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar();
            loadSectionQuizzes();
            initializeNavigation();
            
            if (!window.location.hash) {
                router.navigateTo(CHAPTER_ID, 'introduction');
            }
        });
        
        window.addEventListener('progress-changed', updateProgressBar);
    </script>
</body>
</html>
